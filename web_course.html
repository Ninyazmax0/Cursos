<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desarrollo Web - Status Code 418</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-dark.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.css">
    <link rel="stylesheet" href="assets/css/auras.css">
    <!-- Monaco Editor Loader -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs/loader.min.js"></script>
    <script src="assets/js/theme-manager.js"></script>
    <!-- Firebase Modules -->
    <script type="module" src="assets/js/firebase-config.js"></script>
    <script type="module" src="assets/js/firebase-storage.js"></script>
    <style>
        /* Tokyo Night Theme */
        :root {
            --background: #1a1b26;
            --foreground: #a9b1d6;
            --card-background: #24283b;
            --border: #414868;
            --accent: #7aa2f7;
            --accent-dark: #5a7edb;
            --green: #9ece6a;
            --yellow: #e0af68;
            --red: #f7768e;
            --font-sans: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace;
        }

        body {
            color: var(--foreground);
            font-family: var(--font-sans);
            margin: 0;
            padding: 0;
            position: relative;
            overflow-x: hidden;
            min-height: 100vh;
            background-color: var(--background);
        }

        /* --- FONDO ANIMADO --- */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            transition: opacity 0.5s ease;
        }

        .background-day, .background-night {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .background-day {
            background-image: url('https://i.pinimg.com/originals/71/f1/b9/71f1b924a56150104ec16828f2d31b7f.gif');
        }

        .background-night {
            background-image: url('https://i.pinimg.com/originals/4c/23/98/4c2398e6be397bb08b5cb70b2192d730.gif');
        }

        .dark .background-night {
            opacity: 1;
        }

        :not(.dark) .background-day {
            opacity: 1;
        }

        /* --- CONTENEDOR PRINCIPAL MEJORADO --- */
        .content-box {
            background-color: rgba(36, 40, 59, 0.85);
            border: 1px solid var(--border);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            margin: 2rem auto;
            max-width: 90%;
            min-height: calc(100vh - 4rem);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            position: relative;
        }

        @media (min-width: 768px) {
            .content-box {
                max-width: 1100px;
                min-height: 90vh;
            }
        }

        /* --- ESTILOS DE PANELES Y TARJETAS --- */
        .panel {
            display: none;
            width: 100%;
            padding: 1rem 0;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            flex-grow: 1;
        }
        .panel.active {
            display: flex;
        }

        .level-selection-title {
            font-size: 3rem;
            font-weight: 800;
            color: var(--accent);
            text-shadow: 0 0 10px var(--accent);
            margin-bottom: 0.5rem;
        }
        
        .level-selection-subtitle {
            font-size: 1.25rem;
            color: var(--foreground);
            max-width: 600px;
            margin-bottom: 2rem;
        }

        @media (min-width: 768px) {
            .level-selection-title { font-size: 4rem; }
        }

        /* Estilos para la cuadrícula de niveles */
        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
            width: 100%;
            max-width: 1000px;
            margin-top: 2rem;
        }

        .level-node {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            cursor: pointer;
        }
        
        .level-icon-wrapper {
            width: 64px;
            height: 64px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid;
            transition: all 0.3s ease;
        }
        
        .level-number {
            margin-top: 8px;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .level-node.locked .level-icon-wrapper {
            border-color: var(--border);
            color: var(--border);
            background-color: transparent;
        }
        
        .level-node.unlocked .level-icon-wrapper {
            border-color: var(--accent);
            color: var(--accent);
        }
        
        .level-node.unlocked:hover .level-icon-wrapper {
            background-color: var(--accent);
            color: var(--card-background);
            transform: scale(1.1);
        }
        
        .level-node.completed .level-icon-wrapper {
            border-color: var(--green);
            background-color: var(--green);
            color: var(--card-background);
        }

        /* Botones de acción */
        .btn-primary {
            background-color: var(--accent);
            color: white;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            transition: all 0.2s;
            border: none;
            cursor: pointer;
        }

        .btn-primary:hover:not(:disabled) {
            background-color: var(--accent-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background-color: var(--card-background);
            color: var(--foreground);
            border: 1px solid var(--border);
        }
        .btn-secondary:hover:not(:disabled) {
            background-color: var(--border);
        }

        /* Estilos para el Quiz */
        .quiz-option {
            background-color: var(--card-background);
            border: 1px solid var(--border);
            padding: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .quiz-option:hover {
            border-color: var(--accent);
            background-color: #2e334f;
        }
        .quiz-option.selected {
            border-color: var(--accent);
            background-color: #3b4261;
            font-weight: bold;
        }

        /* Estilos para bloques de código */
        .code-block {
            background-color: var(--card-background);
            border-radius: 8px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .code-block-header {
            background-color: #2d3046;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
        }

        .code-block-header span {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .code-block pre {
            margin: 0;
            padding: 1rem;
            overflow-x: auto;
            background-color: transparent !important;
        }

        .code-block code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            background-color: transparent !important;
        }

        /* Estilos de sintaxis para Prism */
        .token.comment,
        .token.prolog,
        .token.doctype,
        .token.cdata {
            color: #565f89;
        }

        .token.punctuation {
            color: #c0caf5;
        }

        .token.tag {
            color: #f7768e;
        }

        .token.attr-name {
            color: #ff9e64;
        }

        .token.attr-value,
        .token.string {
            color: #9ece6a;
        }

        .token.entity {
            color: #7aa2f7;
        }

        .token.keyword {
            color: #bb9af7;
        }

        .token.function {
            color: #7aa2f7;
        }
        /* Web Playground Premium */
        .web-playground {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
            background: rgba(30, 41, 59, 0.5); /* Glass dark */
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 1rem;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        @media (min-width: 768px) {
            .web-playground {
                flex-direction: row;
                height: 500px;
            }
        }

        .playground-editor, .playground-preview {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-height: 300px;
        }

        .playground-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background: rgba(15, 23, 42, 0.6);
            border-bottom: 1px solid rgba(148, 163, 184, 0.1);
        }

        .playground-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #94a3b8;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .code-editor-area {
            flex: 1;
            background: #0f172a; /* Slate 900 */
            color: #e2e8f0;
            font-family: 'Fira Code', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
            padding: 1rem;
            border: none;
            resize: none;
            outline: none;
        }

        .preview-frame {
            flex: 1;
            background: white;
            border: none;
            width: 100%;
            height: 100%;
        }

        .run-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.5rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.2s;
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.2);
        }

        .run-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(37, 99, 235, 0.3);
            filter: brightness(1.1);
        }

        .run-btn:active {
            transform: translateY(0);
        }

        .code-editor-area {
            padding: 1rem;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            resize: none;
            outline: none;
        }
        iframe.playground-frame {
            width: 100%;
            height: 100%;
            border: none;
            background: white;
        }
    </style>
</head>
<body>

    <!-- FONDO -->
    <div class="background-container">
        <div class="background-day"></div>
        <div class="background-night"></div>
    </div>

    <!-- CONTENDOR PRINCIPAL -->
    <div class="content-box">
        
        <!-- HEADER / NAVBAR SIMPLIFICADO -->
        <div class="w-full flex justify-between items-center mb-8">
            <a href="menu_inicio.html" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                <i data-lucide="terminal" class="w-8 h-8 text-blue-400"></i>
                <span class="font-bold text-xl text-blue-100">Status Code 418</span>
            </a>
            <div class="flex items-center gap-4">
                <button id="view-records-btn" class="text-sm text-gray-400 hover:text-white transition-colors">
                    Mis Evaluaciones
                </button>
                <button id="theme-toggle" class="p-2 rounded-full hover:bg-white/10 transition-colors">
                    <i id="theme-icon" data-lucide="moon" class="w-5 h-5 text-gray-300"></i>
                </button>
                <div class="flex items-center gap-2">
                    <img src="https://ui-avatars.com/api/?name=User&background=random" alt="Avatar" class="w-8 h-8 rounded-full border border-blue-500">
                </div>
            </div>
        </div>

        <!-- PANEL 1: SELECCIÓN DE NIVELES -->
        <div id="level-selection-panel" class="panel active">
            <h1 class="level-selection-title">Mapa Estelar</h1>
            <p class="level-selection-subtitle">Tu viaje para dominar el desarrollo web comienza aquí. Completa cada misión para desbloquear la siguiente galaxia de conocimiento.</p>
            
            <div id="level-grid" class="level-grid">
                <!-- Se genera dinámicamente con JS -->
            </div>
        </div>

        <!-- PANEL 2: LECCIÓN -->
        <div id="lesson-panel" class="panel w-full max-w-4xl text-left">
            <div class="w-full flex justify-between items-center mb-6 pb-4 border-b border-gray-700">
                <h2 id="lesson-title" class="text-2xl font-bold text-blue-300">Nivel 1: Introducción</h2>
                <button id="close-lesson-btn" class="text-gray-400 hover:text-white">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>

            <div class="w-full bg-gray-900/50 rounded-full h-2 mb-8">
                <div id="lesson-progress" class="bg-blue-500 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            
            <div id="lesson-content" class="text-lg leading-relaxed text-gray-300 space-y-6 min-h-[300px]">
                <!-- Contenido dinámico -->
            </div>

            <div class="w-full flex justify-between items-center mt-8 pt-4 border-t border-gray-700">
                <span id="lesson-step" class="text-gray-500 font-mono">1 / 5</span>
                <div class="flex gap-4">
                    <button id="prev-btn" class="btn-secondary px-4 py-2 rounded-lg" disabled>Anterior</button>
                    <button id="next-btn" class="btn-primary">Siguiente</button>
                </div>
            </div>
        </div>

        <!-- PANEL 3: QUIZ -->
        <div id="quiz-panel" class="panel w-full max-w-2xl">
            <h2 id="quiz-level-title" class="text-2xl font-bold mb-6 text-blue-300">Quiz - Nivel 1</h2>
            <div class="w-full bg-gray-800 rounded-lg p-6 mb-6 border border-gray-700">
                <p id="quiz-question" class="text-xl font-medium mb-6">Pregunta...</p>
                <div id="quiz-options" class="grid grid-cols-1 gap-3 text-left">
                    <!-- Opciones dinámicas -->
                </div>
            </div>
            <div class="text-gray-500 text-sm">Pregunta <span id="quiz-progress">1 / 3</span></div>
        </div>

        <!-- PANEL 4: RESULTADOS LECCIÓN/QUIZ -->
        <div id="results-panel" class="panel w-full max-w-lg">
            <i id="results-icon" data-lucide="award" class="w-24 h-24 text-yellow-400 mb-6"></i>
            <h2 id="results-title" class="text-3xl font-bold mb-2">¡Felicidades!</h2>
            <p id="results-score" class="text-xl text-blue-300 mb-4">Puntuación: 100%</p>
            <p id="results-message" class="text-gray-400 mb-8">Has dominado este concepto.</p>
            
            <div class="flex flex-col gap-3 w-full max-w-xs">
                <button id="next-level-btn" class="btn-primary w-full">Siguiente Nivel</button>
                <button id="code-challenge-btn" class="btn-primary w-full hidden flex items-center justify-center gap-2 bg-purple-600 hover:bg-purple-700">
                    <i data-lucide="code"></i> <span>Ir al Desafío de Código</span>
                </button>
                <button id="retry-lesson-btn" class="btn-secondary w-full">Repasar Lección</button>
            </div>
        </div>

        <!-- PANEL 5: RESULTADO DEL DESAFÍO DE CÓDIGO (POST-RETORNO) -->
        <div id="code-results-panel" class="panel w-full max-w-lg">
            <i id="code-results-icon" data-lucide="check-circle" class="w-24 h-24 text-green-400 mb-6"></i>
            <h2 id="code-results-title" class="text-3xl font-bold mb-2">¡Desafío Completado!</h2>
            <p id="code-results-score" class="text-xl text-blue-300 mb-4">Nota: 9/10</p>
            <div id="code-results-feedback" class="text-left text-sm text-gray-400 bg-gray-900 p-4 rounded mb-8 w-full"></div>
            
            <div class="flex flex-col gap-3 w-full max-w-xs">
                <button id="next-level-after-challenge-btn" class="btn-primary w-full">Siguiente Nivel</button>
                <button id="retry-challenge-btn" class="btn-secondary w-full">Reintentar Desafío</button>
                <button id="close-challenge-btn" class="btn-secondary w-full">Volver al Menú</button>
            </div>
        </div>

        <!-- PANEL 6: HISTORIAL DE EVALUACIONES -->
        <div id="records-panel" class="panel w-full max-w-4xl text-left">
            <div class="w-full flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold text-blue-300">Historial de Calificaciones</h2>
                <button id="close-records-btn" class="text-gray-400 hover:text-white">
                    <i data-lucide="x" class="w-6 h-6"></i>
                </button>
            </div>
            <div id="records-list" class="space-y-4 max-h-[600px] overflow-y-auto pr-2">
                <!-- Se llena con JS -->
            </div>
        </div>

    </div>

    <!-- DATA DEL CURSO -->
    <script>
const courseData = [
    { // Nivel 1 - REVISADO
        title: "Los Cimientos de la Web",
        lesson: [
            {
                title: "¿Qué es HTML?",
                content: `
                    <p>HTML son las siglas de <strong>HyperText Markup Language</strong> (Lenguaje de Marcado de Hipertexto). No es un lenguaje de programación, sino un <strong>lenguaje de marcado</strong>. Su única función es darle estructura y significado al contenido de una página web.</p>
                    <p>Piensa en HTML como el esqueleto de un cuerpo humano. Define dónde va la cabeza (título), el cuerpo (contenido principal), los brazos y las piernas (secciones), pero no define su apariencia (colores, fuentes) ni su comportamiento (interactividad). De eso se encargan CSS y JavaScript.</p>
                `
            },
            {
                title: "Etiquetas y Elementos",
                content: `
                    <p>HTML funciona mediante <strong>etiquetas</strong> (tags). La mayoría vienen en pares: una etiqueta de apertura y una de cierre. Por ejemplo, <code>&lt;p&gt;</code> abre un párrafo y <code>&lt;/p&gt;</code> lo cierra.</p>
                    <p>El conjunto de la etiqueta de apertura, el contenido y la etiqueta de cierre se llama un <strong>elemento HTML</strong>.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;p&gt;Este es el contenido de un elemento de párrafo.&lt;/p&gt;</code></pre></div>
                    <p class="mt-4">Algunas etiquetas, como las de imágenes <code>&lt;img&gt;</code> o saltos de línea <code>&lt;br&gt;</code>, no necesitan cerrarse y se conocen como <strong>etiquetas de autocierre</strong>.</p>
                `
            },
            {
                title: "La Estructura Básica",
                content: `
                    <p>Toda página HTML tiene una estructura fundamental. ¡Vamos a analizarla línea por línea!</p>
                    <div class="code-block"><pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;title&gt;Mi Primera Página&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;¡Hola Mundo!&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre></div>
                    <ul class="mt-4 list-disc pl-5">
                        <li><code>&lt;!DOCTYPE html&gt;</code>: Es la primera línea, una instrucción que le dice al navegador que el documento es de tipo HTML5 (la versión moderna de HTML).</li>
                        <li><code>&lt;html&gt;</code>: Es la etiqueta raíz que envuelve todo el contenido de la página. El atributo <code>lang="es"</code> le dice al navegador que el contenido principal está en español.</li>
                        <li><code>&lt;head&gt;</code>: Contiene "metadatos", que es información <strong>para el navegador</strong>. No es visible en la página. Aquí va el título que aparece en la pestaña del navegador (<code>&lt;title&gt;</code>), enlaces a archivos CSS y más.</li>
                        <li><code>&lt;body&gt;</code>: ¡Aquí va la acción! Todo el contenido <strong>visible</strong> para el usuario (textos, imágenes, videos) se coloca dentro de esta etiqueta.</li>
                    </ul>
                `
            },
            {
                title: "Atributos: Más Información para las Etiquetas",
                content: `
                    <p>Los atributos proporcionan información adicional a los elementos. Se escriben dentro de la etiqueta de apertura.</p>
                    <p>Ya viste el atributo <code>lang</code>. Otro muy común es <code>href</code> (Hypertext Reference) en la etiqueta de enlace <code>&lt;a&gt;</code>, que especifica la URL a la que quieres que vaya el enlace.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;!-- Este enlace lleva a Google --&gt;
&lt;a href="https://www.google.com"&gt;Ir a Google&lt;/a&gt;</code></pre></div>
                    <p class="mt-4">O el atributo <code>src</code> (source) en una etiqueta de imagen, que indica la ubicación del archivo de la imagen.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;img src="logo.png" alt="Logo de mi empresa"&gt;</code></pre></div>
                    <p class="mt-2">El atributo <code>alt</code> es muy importante: proporciona un texto alternativo si la imagen no se puede cargar y ayuda a la accesibilidad para personas con discapacidad visual.</p>
                `
            },
            {
                title: "Comentarios en HTML",
                content: `
                    <p>Puedes dejar notas en tu código que el navegador ignorará. Son útiles para explicar partes de tu código a otros desarrolladores o a tu "yo" del futuro.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;!-- Esto es un comentario. El navegador no lo mostrará. --&gt;
&lt;p&gt;Esto sí es visible.&lt;/p&gt;
&lt;!-- &lt;p&gt;Este párrafo no aparecerá porque está comentado.&lt;/p&gt; --&gt;</code></pre></div>
                `
            },

            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido la estructura fundamental de una página web, qué son los elementos, las etiquetas y los atributos. ¡Ahora, a demostrar lo que sabes!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué significa HTML?", options: ["HyperText Markup Language", "High-Level Textual Machine Language", "Hyperlink and Text Management Language", "Home Tool Markup Language"], answer: "HyperText Markup Language" },
            { question: "¿Cuál es el propósito de la etiqueta <body>?", options: ["Contener información para el navegador", "Contener todo el contenido visible de la página", "Definir el idioma del documento", "Enlazar a hojas de estilo"], answer: "Contener todo el contenido visible de la página" },
            { question: "¿Qué tipo de lenguaje es HTML?", options: ["De programación", "De estilos", "De marcado", "De bases de datos"], answer: "De marcado" },
            { question: "¿Cómo se llama el conjunto de una etiqueta de apertura, contenido y etiqueta de cierre?", options: ["Un atributo", "Una declaración", "Un elemento HTML", "Un comentario"], answer: "Un elemento HTML" },
            { question: "¿Cuál de las siguientes es una etiqueta de autocierre?", options: ["<p>", "<div>", "<h1>", "<br>"], answer: "<br>" },
            { question: "La declaración <!DOCTYPE html> le dice al navegador que la página está escrita en...", options: ["HTML4", "XML", "HTML5", "JavaScript"], answer: "HTML5" },
            { question: "¿Dónde se coloca la información para el navegador, como el título de la página?", options: ["En la etiqueta <body>", "En la etiqueta <head>", "Justo después del DOCTYPE", "Al final del archivo"], answer: "En la etiqueta <head>" },
            { question: "¿Para qué sirve el atributo 'href' en una etiqueta <a>?", options: ["Para cambiar el color del texto", "Para especificar la URL de destino del enlace", "Para definir el tamaño del enlace", "Para añadir un comentario"], answer: "Para especificar la URL de destino del enlace" },
            { question: "¿Cómo se escribe un comentario en HTML?", options: ["// Esto es un comentario", "/* Esto es un comentario */", "<!-- Esto es un comentario -->", "# Esto es un comentario"], answer: "<!-- Esto es un comentario -->" },
            { question: "¿Qué atributo proporciona texto alternativo para las imágenes?", options: ["src", "href", "title", "alt"], answer: "alt" }
        ]
    },
    { // Nivel 2 - REVISADO
        title: "Contenido Esencial en HTML",
        lesson: [
            {
                title: "Jerarquía de Títulos",
                content: `
                    <p>Los títulos (headings) organizan el contenido y establecen una jerarquía. Van desde <code>&lt;h1&gt;</code> (el más importante) hasta <code>&lt;h6&gt;</code> (el menos importante).</p>
                    <p><strong>Regla de oro:</strong> Debería haber solo un <code>&lt;h1&gt;</code> por página, que usualmente corresponde al título principal. No uses los títulos solo para cambiar el tamaño del texto; su propósito es dar estructura semántica al documento.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;h1&gt;El Sistema Solar&lt;/h1&gt;
&lt;p&gt;Una introducción a nuestro vecindario cósmico.&lt;/p&gt;
&lt;h2&gt;Planetas Interiores&lt;/h2&gt;
&lt;h3&gt;La Tierra&lt;/h3&gt;
&lt;h2&gt;Planetas Exteriores&lt;/h2&gt;
&lt;h3&gt;Júpiter&lt;/h3&gt;</code></pre></div>
                `
            },
            {
                title: "Párrafos y Saltos de Línea",
                content: `
                    <p>La etiqueta <code>&lt;p&gt;</code> se usa para agrupar texto en párrafos. El navegador añade automáticamente un espacio entre ellos.</p>
                    <p>HTML ignora los saltos de línea que haces en tu editor de código. Si necesitas forzar un salto de línea sin crear un nuevo párrafo, usa la etiqueta de autocierre <code>&lt;br&gt;</code>.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;p&gt;Este es el primer párrafo.&lt;/p&gt;
&lt;p&gt;Este es el segundo. Forzamos una línea aquí.&lt;br&gt;Y esta es la línea nueva.&lt;/p&gt;</code></pre></div>
                `
            },
            {
                title: "Listas: Ordenadas y Desordenadas",
                content: `
                    <p>Las listas son fundamentales para organizar información. Hay dos tipos principales:</p>
                    <ul class="list-disc pl-5">
                        <li><strong>Listas Desordenadas <code>&lt;ul&gt;</code>:</strong> Para items donde el orden no importa. Se muestran con viñetas.</li>
                        <li><strong>Listas Ordenadas <code>&lt;ol&gt;</code>:</strong> Para items donde el orden sí importa, como pasos en una receta. Se muestran numeradas.</li>
                    </ul>
                    <p>En ambos casos, cada item de la lista se define con la etiqueta <code>&lt;li&gt;</code> (list item).</p>
                     <div class="code-block"><pre><code class="language-html">&lt;h4&gt;Lista de la compra (desordenada):&lt;/h4&gt;
&lt;ul&gt;
    &lt;li&gt;Leche&lt;/li&gt;
    &lt;li&gt;Pan&lt;/li&gt;
&lt;/ul&gt;

&lt;h4&gt;Pasos para hacer café (ordenada):&lt;/h4&gt;
&lt;ol&gt;
    &lt;li&gt;Hervir agua&lt;/li&gt;
    &lt;li&gt;Añadir café&lt;/li&gt;
    &lt;li&gt;Servir en una taza&lt;/li&gt;
&lt;/ol&gt;</code></pre></div>
                `
            },
            {
                title: "Dando Énfasis al Texto",
                content: `
                    <p>A veces quieres resaltar ciertas palabras. HTML ofrece etiquetas semánticas para esto:</p>
                    <ul class="list-disc pl-5">
                        <li><code>&lt;strong&gt;</code>: Indica que el texto tiene una <strong>gran importancia</strong>. Los navegadores lo muestran en negrita.</li>
                        <li><code>&lt;em&gt;</code> (emphasis): Pone <em>énfasis</em> en una palabra o frase. Se suele mostrar en cursiva.</li>
                    </ul>
                    <p>Aunque existen las etiquetas <code>&lt;b&gt;</code> (bold) y <code>&lt;i&gt;</code> (italic) que logran el mismo efecto visual, se prefieren <code>&lt;strong&gt;</code> y <code>&lt;em&gt;</code> porque añaden significado semántico, lo cual es mejor para la accesibilidad y los motores de búsqueda.</p>
                `
            },
            {
                title: "Entidades HTML: Caracteres Especiales",
                content: `
                    <p>¿Qué pasa si quieres mostrar una etiqueta HTML como texto en tu página? No puedes escribir <code>&lt;p&gt;</code> directamente, porque el navegador lo interpretaría como una etiqueta real.</p>
                    <p>Para esto, usamos <strong>entidades HTML</strong>. Son códigos especiales para representar caracteres reservados.</p>
                    <ul class="list-disc pl-5">
                        <li>Para mostrar <code>&lt;</code>, escribes <code>&amp;lt;</code> (less than).</li>
                        <li>Para mostrar <code>&gt;</code>, escribes <code>&amp;gt;</code> (greater than).</li>
                        <li>Para mostrar <code>&amp;</code>, escribes <code>&amp;amp;</code> (ampersand).</li>
                    </ul>
                    <div class="code-block"><pre><code class="language-html">&lt;!-- Esto mostrará: El tag &lt;p&gt; se usa para párrafos. --&gt;
&lt;p&gt;El tag &amp;lt;p&amp;gt; se usa para párrafos.&lt;/p&gt;</code></pre></div>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Ahora puedes estructurar texto con títulos, párrafos y listas, y hasta sabes cómo mostrar caracteres especiales. ¡A por el quiz!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué etiqueta usarías para el título más importante de la página?", options: ["<h6>", "<h1>", "<h2>", "<head>"], answer: "<h1>" },
            { question: "Si quieres hacer una lista de ingredientes para una receta (el orden no importa), ¿qué etiqueta usarías?", options: ["<ol>", "<li>", "<ul>", "<dl>"], answer: "<ul>" },
            { question: "Para crear los items dentro de una lista, ya sea ordenada o desordenada, usas la etiqueta...", options: ["<item>", "<li>", "<ol>", "<ul>"], answer: "<li>" },
            { question: "¿Qué etiqueta fuerza un salto de línea dentro de un párrafo?", options: ["<p>", "<br>", "<hr>", "<break>"], answer: "<br>" },
            { question: "Para dar un énfasis fuerte y semántico a un texto (visualmente negrita), ¿cuál es la etiqueta preferida?", options: ["<b>", "<bold>", "<strong>", "<em>"], answer: "<strong>" },
            { question: "¿Cómo mostrarías el carácter '<' en una página web sin que el navegador lo interprete?", options: ["<", "&lt;", "&less;", "&lcarr;"], answer: "&lt;" },
            { question: "Es una buena práctica tener más de un <h1> en una misma página.", options: ["Verdadero", "Falso"], answer: "Falso" },
            { question: "La etiqueta <em> se usa para...", options: ["Mostrar texto muy importante", "Poner énfasis en un texto (visualmente cursiva)", "Crear un error en el texto", "Marcar texto eliminado"], answer: "Poner énfasis en un texto (visualmente cursiva)" },
            { question: "Las etiquetas <ul> y <ol> necesitan etiquetas ______ en su interior.", options: ["<p>", "<li>", "<a>", "<span>"], answer: "<li>" },
            { question: "¿Qué sucede si pones muchos espacios o saltos de línea en tu editor de código HTML?", options: ["Se genera un error", "Se muestran todos en la página", "HTML los ignora y los colapsa en un solo espacio", "Se convierten en <br> automáticamente"], answer: "HTML los ignora y los colapsa en un solo espacio" }
        ]
    },
    { // Nivel 3 - REVISADO
        title: "Contenedores y Semántica",
        lesson: [
            {
                title: "<div> y <span>: Contenedores Genéricos",
                content: `
                    <p>A veces necesitas agrupar elementos para aplicarles estilos o para organización. Para eso existen los contenedores genéricos:</p>
                    <ul class="list-disc pl-5">
                        <li><code>&lt;div&gt;</code> (división): Es un contenedor de <strong>bloque</strong>. Ocupa todo el ancho disponible y siempre empieza en una nueva línea. Es ideal para agrupar grandes secciones de contenido, como una barra lateral o una tarjeta de producto.</li>
                        <li><code>&lt;span&gt;</code>: Es un contenedor de <strong>línea</strong>. Solo ocupa el espacio necesario para su contenido y no empieza en una nueva línea. Es perfecto para agrupar pequeñas partes de texto dentro de un párrafo para, por ejemplo, cambiarles el color.</li>
                    </ul>
                    <div class="code-block"><pre><code class="language-html">&lt;div style="background-color: lightgray;"&gt;
  &lt;h2&gt;Sección de Noticias&lt;/h2&gt;
  &lt;p&gt;Esta es una noticia &lt;span style="color: red;"&gt;urgente&lt;/span&gt;.&lt;/p&gt;
&lt;/div&gt;</code></pre></div>
                `
            },
            {
                title: "HTML Semántico: Estructura con Significado",
                content: `
                    <p>En lugar de usar <code>&lt;div&gt;</code> para todo, HTML5 introdujo etiquetas semánticas que describen su contenido. Esto es genial para la accesibilidad (lectores de pantalla) y para SEO (motores de búsqueda).</p>
                    <p>Imagina la estructura de una página web típica:</p>
                    <div class="code-block"><pre><code class="language-html">&lt;header&gt;
  &lt;h1&gt;Logo y Título de la Web&lt;/h1&gt;
  &lt;nav&gt;
    &lt;!-- Menú de navegación principal --&gt;
  &lt;/nav&gt;
&lt;/header&gt;

&lt;main&gt;
  &lt;h2&gt;Contenido Principal de la Página&lt;/h2&gt;
  &lt;article&gt;
    &lt;h3&gt;Un post del blog&lt;/h3&gt;
  &lt;/article&gt;
  &lt;section&gt;
    &lt;h3&gt;Otra sección de contenido&lt;/h3&gt;
  &lt;/section&gt;
&lt;/main&gt;

&lt;aside&gt;
  &lt;h3&gt;Barra lateral (anuncios, enlaces)&lt;/h3&gt;
&lt;/aside&gt;

&lt;footer&gt;
  &lt;p&gt;Copyright y enlaces de contacto.&lt;/p&gt;
&lt;/footer&gt;</code></pre></div>
                `
            },
            {
                title: "Explicación de Etiquetas Semánticas",
                content: `
                    <ul class="list-disc pl-5">
                        <li><code>&lt;header&gt;</code>: Contiene la cabecera de una página o sección. Usualmente tiene el logo, el título y la navegación.</li>
                        <li><code>&lt;nav&gt;</code>: Para el menú de navegación principal.</li>
                        <li><code>&lt;main&gt;</code>: Debe contener el contenido <strong>principal y único</strong> de la página. Solo debe haber uno por página.</li>
                        <li><code>&lt;article&gt;</code>: Para contenido independiente y auto-contenido, como un post de un blog, un artículo de periódico o un comentario de un foro.</li>
                        <li><code>&lt;section&gt;</code>: Agrupa contenido temáticamente relacionado. Es una sección genérica, pero con más significado que un <code>&lt;div&gt;</code>.</li>
                        <li><code>&lt;aside&gt;</code>: Para contenido relacionado tangencialmente, como una barra lateral (sidebar).</li>
                        <li><code>&lt;footer&gt;</code>: Para el pie de página. Contiene información de autor, copyright, etc.</li>
                    </ul>
                `
            },
            {
                title: "Anidando Enlaces",
                content: `
                    <p>Una pregunta común es si se pueden poner enlaces dentro de otros enlaces. La respuesta simple es <strong>no</strong>. Anidar etiquetas <code>&lt;a&gt;</code> no es válido en HTML y los navegadores se comportarán de forma impredecible.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;!-- ❌ INCORRECTO --&gt;
&lt;a href="#"&gt;Enlace exterior &lt;a href="#"&gt;enlace interior&lt;/a&gt;&lt;/a&gt;

&lt;!-- ✅ CORRECTO --&gt;
&lt;a href="#"&gt;Primer enlace&lt;/a&gt; | &lt;a href="#"&gt;Segundo enlace&lt;/a&gt;</code></pre></div>
                    <p>Si quieres que un bloque entero sea clickeable, puedes poner un <code>&lt;div&gt;</code> u otro elemento dentro de un <code>&lt;a&gt;</code> (esto es válido en HTML5), pero nunca otro <code>&lt;a&gt;</code>.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido a estructurar tus páginas de forma profesional con contenedores y etiquetas semánticas. ¡Demuestra que lo dominas!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué etiqueta usarías para la cabecera principal de tu sitio web, que contiene el logo y el menú?", options: ["<head>", "<main>", "<header>", "<section>"], answer: "<header>" },
            { question: "¿Cuál es la principal diferencia entre <div> y <span>?", options: ["<div> es para imágenes y <span> para texto", "<div> es un elemento de bloque y <span> de línea", "<div> no puede tener estilos y <span> sí", "<div> es semántico y <span> no"], answer: "<div> es un elemento de bloque y <span> de línea" },
            { question: "El contenido principal y único de una página debe ir dentro de la etiqueta...", options: ["<article>", "<section>", "<main>", "<header>"], answer: "<main>" },
            { question: "Para un post de un blog que podría existir de forma independiente, ¿qué etiqueta semántica es la más apropiada?", options: ["<section>", "<article>", "<div>", "<main>"], answer: "<article>" },
            { question: "La etiqueta <nav> se usa típicamente para...", options: ["Navegar a la siguiente página", "Contener el menú de navegación principal", "Crear un nuevo artículo", "Definir una nota al pie"], answer: "Contener el menú de navegación principal" },
            { question: "Una barra lateral con contenido relacionado pero no esencial (como anuncios) iría dentro de...", options: ["<section>", "<aside>", "<div>", "<footer>"], answer: "<aside>" },
            { question: "El pie de página, con información de copyright y contacto, se define con la etiqueta...", options: ["<bottom>", "<end>", "<footer>", "<main>"], answer: "<footer>" },
            { question: "¿Es una práctica válida anidar una etiqueta <a> dentro de otra etiqueta <a>?", options: ["Sí, siempre", "No, nunca es válido", "Solo si tienen diferentes atributos href", "Sí, pero solo en el <footer>"], answer: "No, nunca es válido" },
            { question: "¿Cuál de estas etiquetas es un elemento de línea?", options: ["<div>", "<h1>", "<p>", "<span>"], answer: "<span>" },
            { question: "¿Por qué es importante usar HTML semántico?", options: ["Hace que la página se cargue más rápido", "Es la única forma de usar CSS", "Mejora la accesibilidad y el SEO", "Añade colores automáticamente"], answer: "Mejora la accesibilidad y el SEO" }
        ]
    },
    { // Nivel 4 - REVISADO
        title: "Introducción a CSS",
        lesson: [
            {
                title: "¿Qué es CSS?",
                content: `
                    <p>CSS son las siglas de <strong>Cascading Style Sheets</strong> (Hojas de Estilo en Cascada). Es el lenguaje que usamos para dar estilo y diseño a nuestras páginas HTML. Si HTML es el esqueleto, CSS es la ropa, el peinado y el maquillaje.</p>
                    <p>Con CSS controlamos colores, fuentes, tamaños, márgenes, posicionamiento y mucho más.</p>
                `
            },
            {
                title: "Sintaxis de una Regla CSS",
                content: `
                    <p>Una regla CSS tiene dos partes principales: un <strong>selector</strong> y un <strong>bloque de declaración</strong>.</p>
                    <div class="code-block"><pre><code class="language-css">/* h1 es el selector */
h1 { 
    /* color: blue; es una declaración */
    color: blue; 
    font-size: 24px;
}</code></pre></div>
                    <ul class="list-disc pl-5 mt-4">
                        <li>El <strong>selector</strong> apunta al elemento HTML que quieres estilizar (ej. <code>h1</code>, <code>p</code>, <code>.mi-clase</code>).</li>
                        <li>El <strong>bloque de declaración</strong> va entre llaves <code>{ }</code> y contiene una o más declaraciones separadas por punto y coma.</li>
                        <li>Cada <strong>declaración</strong> consiste en una <strong>propiedad</strong> (ej. <code>color</code>) y un <strong>valor</strong> (ej. <code>blue</code>), separados por dos puntos.</li>
                    </ul>
                `
            },
            {
                title: "Tres Formas de Añadir CSS",
                content: `
                    <p>Puedes añadir CSS a tu HTML de tres maneras:</p>
                    <ol class="list-decimal pl-5">
                        <li><strong>CSS Externo (Recomendado):</strong> Creas un archivo <code>.css</code> separado y lo enlazas en el <code>&lt;head&gt;</code> de tu HTML. Esto es ideal para mantener el código organizado.
                            <div class="code-block"><pre><code class="language-html">&lt;head&gt;
  &lt;link rel="stylesheet" href="styles.css"&gt;
&lt;/head&gt;</code></pre></div>
                        </li>
                        <li><strong>CSS Interno:</strong> Escribes el CSS dentro de una etiqueta <code>&lt;style&gt;</code> en el <code>&lt;head&gt;</code> del HTML. Útil para estilos de una sola página.
                            <div class="code-block"><pre><code class="language-html">&lt;head&gt;
  &lt;style&gt;
    body { background-color: #f0f0f0; }
  &lt;/style&gt;
&lt;/head&gt;</code></pre></div>
                        </li>
                        <li><strong>CSS en Línea:</strong> Aplicas estilos directamente a un elemento usando el atributo <code>style</code>. Debe usarse con moderación, ya que es difícil de mantener.
                            <div class="code-block"><pre><code class="language-html">&lt;p style="color: red;"&gt;Este texto es rojo.&lt;/p&gt;</code></pre></div>
                        </li>
                    </ol>
                `
            },
            {
                title: "Selectores Básicos: Etiqueta, Clase e ID",
                content: `
                    <p>Los selectores son la clave para conectar CSS con HTML.</p>
                    <ul class="list-disc pl-5">
                        <li><strong>Selector de Etiqueta:</strong> Selecciona todos los elementos de un tipo. (<code>p { ... }</code>)</li>
                        <li><strong>Selector de Clase:</strong> Selecciona todos los elementos que tienen un atributo <code>class</code> específico. Se usa un punto <code>.</code> antes del nombre de la clase en CSS. Es reutilizable. (<code>.importante { ... }</code>)</li>
                        <li><strong>Selector de ID:</strong> Selecciona <strong>un único elemento</strong> con un atributo <code>id</code> específico. Se usa una almohadilla <code>#</code>. Un ID debe ser único en toda la página. (<code>#titulo-principal { ... }</code>)</li>
                    </ul>
                     <div class="code-block"><pre><code class="language-html">&lt;h1 id="titulo-principal"&gt;Título&lt;/h1&gt;
&lt;p class="importante"&gt;Párrafo importante.&lt;/p&gt;
&lt;p&gt;Otro párrafo.&lt;/p&gt;</code></pre></div>
                     <div class="code-block mt-2"><pre><code class="language-css">/* Selector de ID */
#titulo-principal { color: navy; }

/* Selector de Clase */
.importante { font-weight: bold; }

/* Selector de Etiqueta */
p { color: gray; }</code></pre></div>
                `
            },
            {
                title: "El Significado de 'Cascada'",
                content: `
                    <p>La "C" en CSS significa "Cascading" (en Cascada). Este es un concepto fundamental que define cómo se resuelven los conflictos cuando múltiples reglas CSS apuntan al mismo elemento.</p>
                    <p>La cascada sigue un orden de prioridad:</p>
                    <ol class="list-decimal pl-5">
                        <li><strong>Importancia:</strong> Una regla con <code>!important</code> casi siempre gana (¡pero úsalo con mucho cuidado!).</li>
                        <li><strong>Especificidad:</strong> Reglas más específicas tienen más peso. Un selector de ID (<code>#id</code>) es más específico que un selector de clase (<code>.clase</code>), que a su vez es más específico que un selector de etiqueta (<code>p</code>).</li>
                        <li><strong>Orden de Fuente:</strong> Si la especificidad es la misma, la regla que aparece más tarde en el código (o en el último archivo CSS importado) es la que se aplica.</li>
                    </ol>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Ya conoces los fundamentos de CSS, cómo añadirlo a tu web y cómo funcionan los selectores y la cascada. ¡Vamos a probarlo!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué significa CSS?", options: ["Creative Style System", "Cascading Style Sheets", "Computer Styling Syntax", "Colorful Style Sheets"], answer: "Cascading Style Sheets" },
            { question: "¿Qué parte de una regla CSS apunta al elemento HTML que se va a estilizar?", options: ["La propiedad", "El valor", "El selector", "La declaración"], answer: "El selector" },
            { question: "¿Qué símbolo se usa en CSS para seleccionar elementos por su CLASE?", options: ["# (Almohadilla)", ". (Punto)", "* (Asterisco)", "& (Ampersand)"], answer: ". (Punto)" },
            { question: "¿Y qué símbolo se usa para seleccionar un elemento por su ID?", options: ["# (Almohadilla)", ". (Punto)", "!", "$"], answer: "# (Almohadilla)" },
            { question: "¿Cuál es la forma RECOMENDADA de añadir CSS a un sitio web con múltiples páginas?", options: ["CSS en línea (atributo style)", "CSS interno (<style>)", "CSS externo (archivo .css enlazado)", "Usando JavaScript"], answer: "CSS externo (archivo .css enlazado)" },
            { question: "En la 'cascada' de CSS, ¿qué criterio tiene, por lo general, la máxima prioridad?", options: ["El orden en el archivo", "La especificidad del selector", "El color de la regla", "Una regla marcada con !important"], answer: "Una regla marcada con !important" },
            { question: "¿Cuál de estos selectores es MÁS específico?", options: ["p", ".texto", "#principal"], answer: "#principal" },
            { question: "En la declaración `color: blue;`, `color` es...", options: ["El selector", "La propiedad", "El valor", "La clase"], answer: "La propiedad" },
            { question: "Si dos reglas CSS tienen la misma especificidad, ¿cuál se aplica?", options: ["La primera que aparece en el código", "La última que aparece en el código", "Ninguna de las dos", "La que tenga un color más oscuro"], answer: "La última que aparece en el código" },
            { question: "La etiqueta <link rel=\"stylesheet\"> para enlazar un CSS externo se coloca dentro de...", options: ["<body>", "<header>", "<footer>", "<head>"], answer: "<head>" }
        ]
    },
    { // Nivel 5 - REVISADO
        title: "El Modelo de Caja en CSS",
        lesson: [
            {
                title: "Todo es una Caja",
                content: `
                    <p>El concepto más importante del diseño en CSS es el <strong>Modelo de Caja (Box Model)</strong>. Cada elemento HTML que pones en una página es, para el navegador, una caja rectangular. Esta caja se compone de cuatro partes:</p>
                    <ul class="list-disc pl-5">
                        <li><strong>Content (Contenido):</strong> El área donde se muestra tu texto o imágenes.</li>
                        <li><strong>Padding (Relleno):</strong> Un espacio transparente alrededor del contenido, pero dentro de los bordes.</li>
                        <li><strong>Border (Borde):</strong> Una línea que rodea el padding y el contenido.</li>
                        <li><strong>Margin (Margen):</strong> Un espacio transparente fuera del borde, que separa la caja de otras cajas.</li>
                    </ul>
                    <img src="https://i.imgur.com/kE5gSt8.png" alt="Diagrama del Modelo de Caja de CSS" style="max-width: 100%; border-radius: 8px; margin-top: 1rem;">
                `
            },
            {
                title: "Propiedades del Modelo de Caja",
                content: `
                    <p>Puedes controlar cada parte de la caja con propiedades CSS:</p>
                    <div class="code-block"><pre><code class="language-css">.mi-caja {
    /* Dimensiones del CONTENIDO */
    width: 300px;
    height: 150px;

    /* PADDING de 10px en todos los lados */
    padding: 10px; 
    /* Equivalente a:
    padding-top: 10px;
    padding-right: 10px;
    padding-bottom: 10px;
    padding-left: 10px;
    */

    /* BORDER de 2px, sólido y de color negro */
    border: 2px solid black;

    /* MARGIN de 20px en todos los lados */
    margin: 20px;
}</code></pre></div>
                    <p class="mt-4">Puedes especificar los valores para cada lado (top, right, bottom, left) de forma individual, o usar la notación abreviada (shorthand).</p>
                `
            },
            {
                title: "box-sizing: border-box",
                content: `
                    <p>Por defecto, cuando defines un <code>width</code> y un <code>height</code>, estos solo se aplican al área del <strong>contenido</strong>. El padding y el border se añaden por fuera, haciendo que la caja sea más grande de lo que esperabas. Esto puede ser muy confuso.</p>
                    <p>La solución moderna es usar <code>box-sizing: border-box;</code>. Con esta regla, el <code>width</code> y <code>height</code> que definas incluirán el <strong>contenido, el padding y el borde</strong>. ¡Esto hace que los cálculos de tamaño sean mucho más intuitivos!</p>
                     <div class="code-block"><pre><code class="language-css">/* Un truco muy común es aplicar esto a todos los elementos */
* {
    box-sizing: border-box;
}

.mi-caja {
    width: 300px; /* Ahora 300px es el ancho total de la caja */
    padding: 20px;
    border: 5px solid red;
    /* El área para el contenido se ajustará automáticamente */
}</code></pre></div>
                    <p class="mt-2">El selector universal <code>*</code> selecciona todos los elementos de la página.</p>
                `
            },
            {
                title: "Unidades: Píxeles vs. Unidades Relativas",
                content: `
                    <p>Para definir tamaños, tienes varias unidades a tu disposición:</p>
                    <ul class="list-disc pl-5">
                        <li><strong><code>px</code> (Píxeles):</strong> Una unidad absoluta y fija. Es precisa, pero no se adapta bien a diferentes tamaños de pantalla.</li>
                        <li><strong><code>%</code> (Porcentaje):</strong> Una unidad relativa al tamaño del elemento padre. <code>width: 50%;</code> significa que la caja ocupará la mitad del ancho de su contenedor.</li>
                        <li><strong><code>em</code>:</strong> Una unidad relativa al tamaño de fuente (<code>font-size</code>) del elemento actual. Si <code>font-size</code> es <code>16px</code>, entonces <code>2em</code> son <code>32px</code>.</li>
                        <li><strong><code>rem</code> (root em):</strong> Una unidad relativa al tamaño de fuente del elemento raíz (la etiqueta <code>&lt;html&gt;</code>). Es la unidad relativa más usada y recomendada hoy en día porque proporciona consistencia en toda la página.</li>
                    </ul>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Dominar el Modelo de Caja es el paso más importante para crear layouts en CSS. Has visto sus partes y cómo controlar tamaños. ¡A por ello!</p>"
            }
        ],
        quiz: [
            { question: "En el Modelo de Caja, ¿qué propiedad define el espacio ENTRE el contenido y el borde?", options: ["margin", "spacing", "padding", "content-gap"], answer: "padding" },
            { question: "¿Y cuál define el espacio FUERA del borde, separando el elemento de otros?", options: ["margin", "spacing", "padding", "border-gap"], answer: "margin" },
            { question: "Si a una caja con `box-sizing: border-box` le pones `width: 100px` y `padding: 10px`, ¿cuál es su ancho total?", options: ["120px", "110px", "100px", "80px"], answer: "100px" },
            { question: "Si a una caja con el `box-sizing` por defecto le pones `width: 100px` y `padding: 10px` a cada lado, ¿cuál es su ancho total?", options: ["120px", "110px", "100px", "80px"], answer: "120px" },
            { question: "¿Qué hace el selector universal `*` en CSS?", options: ["Selecciona solo los elementos importantes", "Multiplica los valores de las propiedades", "Selecciona todos los elementos de la página", "Es un comentario"], answer: "Selecciona todos los elementos de la página" },
            { question: "¿Cuál es la unidad de medida relativa al tamaño de fuente del elemento RAÍZ (<html>)?", options: ["em", "px", "%", "rem"], answer: "rem" },
            { question: "La propiedad `border` es una notación abreviada para...", options: ["border-width, border-style, y border-color", "border-size, border-type, y border-shade", "margin, padding, y content", "width, height, y display"], answer: "border-width, border-style, y border-color" },
            { question: "Si un elemento tiene `font-size: 20px;`, ¿a cuántos píxeles equivale `padding: 2em;`?", options: ["20px", "30px", "40px", "10px"], answer: "40px" },
            { question: "Las cuatro partes del Modelo de Caja, de adentro hacia afuera, son:", options: ["Margin, Border, Padding, Content", "Content, Padding, Border, Margin", "Content, Border, Padding, Margin", "Padding, Content, Margin, Border"], answer: "Content, Padding, Border, Margin" },
            { question: "La propiedad `margin` se usa para...", options: ["Añadir un fondo de color", "Separar un elemento de otros elementos", "Aumentar el tamaño del texto", "Crear un borde punteado"], answer: "Separar un elemento de otros elementos" }
        ]
    },
    { // Nivel 6 - REVISADO
        title: "Introducción a JavaScript",
        lesson: [
            {
                title: "¿Qué es JavaScript?",
                content: `
                    <p>JavaScript (o JS) es un <strong>lenguaje de programación</strong> que da vida a las páginas web. Mientras HTML estructura y CSS decora, JavaScript añade <strong>interactividad</strong>.</p>
                    <p>Con JS puedes:</p>
                    <ul class="list-disc pl-5">
                        <li>Reaccionar a acciones del usuario (clics, movimientos del ratón).</li>
                        <li>Cambiar el contenido de la página dinámicamente sin recargarla.</li>
                        <li>Crear animaciones, validar formularios, cargar datos de servidores y mucho más.</li>
                    </ul>
                    <p>El código JavaScript se ejecuta directamente en el navegador del usuario.</p>
                `
            },
            {
                title: "Añadiendo JavaScript a tu Página",
                content: `
                    <p>Al igual que con CSS, hay varias formas de incluir JS. La más común y recomendada es usar la etiqueta <code>&lt;script&gt;</code> con el atributo <code>src</code> para enlazar un archivo <code>.js</code> externo.</p>
                    <p>Por convención, la etiqueta <code>&lt;script&gt;</code> se suele colocar justo antes del cierre de la etiqueta <code>&lt;/body&gt;</code>. Esto asegura que todo el HTML se haya cargado antes de que el JavaScript intente manipularlo.</p>
                    <div class="code-block"><pre><code class="language-html">&lt;body&gt;
    &lt;!-- Tu contenido HTML va aquí --&gt;
    &lt;h1 id="titulo"&gt;Hola&lt;/h1&gt;

    &lt;script src="mi_script.js"&gt;&lt;/script&gt;
&lt;/body&gt;</code></pre></div>
                `
            },
            {
                title: "Variables: Guardando Información",
                content: `
                    <p>Las variables son como cajas donde guardamos datos. En JavaScript moderno, usamos principalmente dos palabras clave para declararlas:</p>
                    <ul class="list-disc pl-5">
                        <li><code>let</code>: Para variables cuyo valor puede cambiar.</li>
                        <li><code>const</code>: Para constantes, es decir, variables cuyo valor no cambiará una vez asignado.</li>
                    </ul>
                     <div class="code-block"><pre><code class="language-javascript">// Usamos 'let' porque el nombre de usuario puede cambiar
let nombreUsuario = "Ana"; 
nombreUsuario = "Carlos"; // Válido

// Usamos 'const' para un valor que no debería cambiar
const PI = 3.1416;
// PI = 3.14; // Esto daría un error
 
let edad = 25; // Números
let mensaje = "¡Hola, mundo!"; // Cadenas de texto (Strings)
let esMayorDeEdad = true; // Booleanos (true o false)</code></pre></div>
                    <p class="mt-2">También existe <code>var</code>, una forma más antigua de declarar variables, pero se recomienda usar <code>let</code> y <code>const</code>.</p>
                `
            },
            {
                title: "La Consola del Navegador",
                content: `
                    <p>La consola es la mejor amiga de un desarrollador de JavaScript. Es una herramienta en tu navegador (puedes abrirla con F12 o clic derecho -> Inspeccionar -> Consola) donde puedes ver mensajes, errores y probar código.</p>
                    <p>El comando <code>console.log()</code> te permite imprimir cualquier variable o mensaje en la consola para depurar tu código.</p>
                    <div class="code-block"><pre><code class="language-javascript">let saludo = "Bienvenido a JavaScript";
console.log(saludo); // "Bienvenido a JavaScript" aparecerá en la consola

let a = 10;
let b = 20;
console.log(a + b); // 30 aparecerá en la consola</code></pre></div>
                `
            },
            {
                title: "Interactuando con el DOM",
                content: `
                    <p>El DOM (Document Object Model) es la representación de tu HTML que JavaScript puede entender y manipular. JS puede "ver" cada elemento de tu página como un objeto.</p>
                    <p>Para empezar a manipular el DOM, primero necesitamos seleccionar un elemento. El método más común es <code>document.getElementById()</code>.</p>
                    <div class="code-block"><pre><code class="language-javascript">// HTML: &lt;h1 id="titulo"&gt;Título Original&lt;/h1&gt;

// En tu archivo .js:
// 1. Seleccionamos el elemento por su ID y lo guardamos en una variable
const miTitulo = document.getElementById("titulo");

// 2. Manipulamos sus propiedades. Por ejemplo, cambiamos su texto.
miTitulo.textContent = "¡Título Cambiado con JS!";

// 3. O cambiamos su estilo.
miTitulo.style.color = "purple";</code></pre></div>
                    <p class="mt-2"><code>textContent</code> y <code>style</code> son propiedades del objeto <code>miTitulo</code> que representan el contenido de texto y los estilos en línea del elemento <code>&lt;h1&gt;</code>, respectivamente.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has dado tus primeros pasos en JavaScript: sabes qué es, cómo incluirlo en tu página, cómo guardar datos en variables y cómo manipular tu primer elemento HTML. ¡Vamos al quiz!</p>"
            }
        ],
        quiz: [
            { question: "¿Para qué se utiliza principalmente JavaScript en el desarrollo web?", options: ["Para estructurar el contenido de la página", "Para dar estilos y colores a la página", "Para añadir interactividad y comportamiento a la página", "Para gestionar bases de datos"], answer: "Para añadir interactividad y comportamiento a la página" },
            { question: "¿Dónde se recomienda colocar la etiqueta &lt;script&gt; para enlazar un archivo JS externo?", options: ["Dentro de la etiqueta &lt;head&gt;", "Justo después de la etiqueta &lt;body&gt;", "Justo antes de cerrar la etiqueta &lt;/body&gt;", "Fuera de la etiqueta &lt;html&gt;"], answer: "Justo antes de cerrar la etiqueta &lt;/body&gt;" },
            { question: "Si necesitas guardar un valor que NUNCA va a cambiar, como el número Pi, ¿qué palabra clave deberías usar?", options: ["let", "var", "const", "static"], answer: "const" },
            { question: "Y si el valor de una variable SÍ puede cambiar, como la puntuación de un jugador, ¿qué palabra clave es la más adecuada?", options: ["let", "const", "fixed", "variable"], answer: "let" },
            { question: "¿Qué comando usarías para imprimir un mensaje o el valor de una variable en la consola del navegador?", options: ["document.write()", "alert()", "console.log()", "print()"], answer: "console.log()" },
            { question: "El DOM (Document Object Model) es...", options: ["Un lenguaje de programación", "Una hoja de estilos", "La representación de la estructura HTML que JS puede manipular", "Un servidor web"], answer: "La representación de la estructura HTML que JS puede manipular" },
            { question: "¿Qué método de `document` se usa para seleccionar un elemento por su atributo `id`?", options: ["getElementByClass()", "querySelector()", "getElement()", "getElementById()"], answer: "getElementById()" },
            { question: "Después de seleccionar un elemento con `const el = document.getElementById('miId');`, ¿cómo cambiarías su color de texto a rojo?", options: ["el.color = 'red';", "el.style.color = 'red';", "el.changeColor('red');", "el.css('color', 'red');"], answer: "el.style.color = 'red';" },
            { question: "El código JavaScript se ejecuta en...", options: ["El servidor web", "La base de datos", "El navegador del usuario", "El editor de código"], answer: "El navegador del usuario" },
            { question: "Para cambiar el texto visible dentro de un elemento, puedes modificar su propiedad...", options: ["text", "content", "textContent", "value"], answer: "textContent" }
        ]
    },
    { // Nivel 7 - Funciones en JavaScript: Explicar código
        title: "Funciones en JavaScript",
        lesson: [
            {
                title: "Código Completo: Funciones",
                content: `
                    <p>Aquí tienes un ejemplo de código con las funciones que aprenderás en este nivel:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                        <div class="code-block-header px-4 py-2 flex items-center gap-2">
                            <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                        </div>
                        <pre class="p-4"><code class="language-javascript">function saludar(nombre) {
  return "Hola, " + nombre;
}

let miFuncion = function() {
  console.log("Función de expresión");
};

const funcionFlecha = () => {
  console.log("Función flecha");
};</code></pre>
                    </div>
                `
            },
            {
                title: "Explicación del Código: Declaración de Funciones",
                content: `
                    <p>Las funciones son bloques de código reutilizables.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">function saludar(nombre) {
    return "¡Hola, " + nombre + "!";
}</code></pre>
                    </div>
                    <p>La función <code>saludar</code> toma un parámetro <code>nombre</code> y devuelve un saludo personalizado.</p>
                `
            },
            {
                title: "Explicación del Código: Llamando Funciones",
                content: `
                    <p>Para ejecutar una función, la llamas con su nombre seguido de paréntesis.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">console.log(saludar("Ana")); // ¡Hola, Ana!</code></pre>
                    </div>
                `
            },
            {
                title: "Tipos de Funciones",
                content: `
                    <p>JavaScript tiene diferentes formas de declarar funciones:</p>
                    <ul>
                        <li><strong>Declaración de función</strong> - <code>function nombre() {}</code></li>
                        <li><strong>Expresión de función</strong> - <code>const nombre = function() {}</code></li>
                        <li><strong>Función flecha</strong> - <code>const nombre = () => {}</code></li>
                    </ul>
                `
            },
            {
                title: "Funciones con Parámetros",
                content: `
                    <p>Las funciones pueden recibir parámetros para trabajar con diferentes valores.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">function saludar(nombre) {
    return "Hola, " + nombre + "!";
}

console.log(saludar("María"));  // "Hola, María!"
console.log(saludar("Juan"));   // "Hola, Juan!"

// Múltiples parámetros
function sumar(a, b) {
    return a + b;
}

console.log(sumar(5, 3));  // 8</code></pre>
                    </div>
                    <p>Los parámetros permiten que las funciones sean reutilizables con diferentes datos.</p>
                `
            },
            {
                title: "Funciones Anónimas y Flecha",
                content: `
                    <p>JavaScript permite crear funciones sin nombre y funciones flecha.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">// Función anónima
let despedir = function(nombre) {
    return "Adiós, " + nombre;
};

// Función flecha
let multiplicar = (a, b) => a * b;

// Función flecha con cuerpo
let esMayor = (edad) => {
    if (edad >= 18) {
        return "Mayor de edad";
    } else {
        return "Menor de edad";
    }
};

console.log(despedir("Ana"));     // "Adiós, Ana"
console.log(multiplicar(4, 5));   // 20
console.log(esMayor(20));         // "Mayor de edad"</code></pre>
                    </div>
                    <p>Las funciones flecha son más concisas y no tienen su propio <code>this</code>.</p>
                `
            },
            {
                title: "Alcance de Variables",
                content: `
                    <p>El alcance determina dónde se puede acceder a una variable.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">// Variable global
let global = "Soy global";

function ejemplo() {
    // Variable local a la función
    let local = "Soy local";
    
    if (true) {
        // Variable de bloque
        let bloque = "Soy de bloque";
        var varBloque = "Soy var (no respeta bloque)";
        console.log(bloque);  // Funciona
    }
    
    console.log(local);      // Funciona
    console.log(varBloque);  // Funciona (var no respeta bloques)
    console.log(global);     // Funciona
}

console.log(global);  // Funciona
// console.log(local); // Error: local no está definida</code></pre>
                    </div>
                    <p><code>let</code> y <code>const</code> tienen alcance de bloque, <code>var</code> tiene alcance de función.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido sobre funciones en JavaScript. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Cómo se declara una función?", options: ["function miFuncion()", "def miFuncion()", "func miFuncion()", "declare miFuncion()"], answer: "function miFuncion()" },
            { question: "¿Qué hace return?", options: ["Termina la función", "Devuelve un valor", "Crea una variable", "Todas las anteriores"], answer: "Todas las anteriores" },
            { question: "¿Qué son los parámetros?", options: ["Valores que devuelve la función", "Variables que recibe la función", "Nombre de la función", "Tipo de función"], answer: "Variables que recibe la función" },
            { question: "¿Cómo se llama una función?", options: ["miFuncion{}", "miFuncion()", "miFuncion[]", "miFuncion<>"], answer: "miFuncion()" },
            { question: "¿Qué devuelve una función sin return?", options: ["null", "undefined", "error", "nada"], answer: "undefined" },
            { question: "¿Se pueden anidar funciones?", options: ["Sí", "No", "Solo en objetos", "Solo en arrays"], answer: "Sí" },
            { question: "¿Qué es una función anónima?", options: ["Función sin nombre", "Función con errores", "Función muy pequeña", "Función lenta"], answer: "Función sin nombre" },
            { question: "¿Para qué sirven las funciones?", options: ["Solo para matemáticas", "Reutilizar código", "Crear variables", "Mostrar mensajes"], answer: "Reutilizar código" },
            { question: "¿Qué palabra clave crea funciones?", options: ["func", "function", "def", "declare"], answer: "function" },
            { question: "¿Pueden las funciones tener parámetros por defecto?", options: ["Sí", "No", "Solo en ES6+", "Solo en objetos"], answer: "Sí" }
        ]
    },
    { // Nivel 8 - Eventos en JavaScript: Explicar código
        title: "Eventos en JavaScript",
        lesson: [
            {
                title: "Código Completo: Eventos",
                content: `
                    <p>Aquí tienes un ejemplo de código con los eventos que aprenderás en este nivel:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                        <div class="code-block-header px-4 py-2 flex items-center gap-2">
                            <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                        </div>
                        <pre class="p-4"><code class="language-html">&lt;button id="miBoton"&gt;Púlsame&lt;/button&gt;
&lt;script&gt;
    const boton = document.getElementById('miBoton');
    boton.addEventListener('click', () => {
        alert('Botón pulsado');
    });
&lt;/script&gt;</code></pre>
                    </div>
                `
            },
            {
                title: "Explicación del Código: Escuchando Eventos",
                content: `
                    <p>Los eventos permiten que JavaScript responda a acciones del usuario.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">const boton = document.getElementById('miBoton');
boton.addEventListener('click', function() {
    alert('¡Botón clickeado!');
});</code></pre>
                    </div>
                    <p>Este código busca un elemento con ID 'miBoton' y le añade un escuchador de eventos para el clic.</p>
                `
            },
            {
                title: "Explicación del Código: Función del Evento",
                content: `
                    <p>La función se ejecuta cuando ocurre el evento.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">function() {
    alert('¡Botón clickeado!');
}</code></pre>
                    </div>
                    <p>Esta es una función anónima que se ejecuta cuando se hace clic en el botón.</p>
                `
            },
            {
                title: "Tipos de Eventos Comunes",
                content: `
                    <p>Algunos eventos comunes en JavaScript:</p>
                    <ul>
                        <li><code>click</code> - Clic del mouse</li>
                        <li><code>mouseover</code> - Mouse sobre elemento</li>
                        <li><code>keydown</code> - Tecla presionada</li>
                        <li><code>submit</code> - Formulario enviado</li>
                        <li><code>load</code> - Página cargada</li>
                    </ul>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido sobre eventos en JavaScript. ¡Muestra que sabes manejarlos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué método añade escuchadores de eventos?", options: ["addEvent", "addEventListener", "onEvent", "listenEvent"], answer: "addEventListener" },
            { question: "¿Qué evento se dispara al hacer clic?", options: ["click", "onclick", "mouseclick", "buttonclick"], answer: "click" },
            { question: "¿Qué evento se dispara al cambiar input?", options: ["input", "change", "modify", "update"], answer: "change" },
            { question: "¿Qué contiene información del evento?", options: ["Event object", "Element object", "Window object", "Document object"], answer: "Event object" },
            { question: "¿Cómo se previene el comportamiento por defecto?", options: ["preventDefault()", "stopPropagation()", "cancelEvent()", "blockDefault()"], answer: "preventDefault()" },
            { question: "¿Qué evento se dispara al enviar formulario?", options: ["send", "submit", "post", "form"], answer: "submit" },
            { question: "¿Qué evento se dispara al cargar la página?", options: ["ready", "load", "start", "init"], answer: "load" },
            { question: "¿Para qué sirven los eventos?", options: ["Mostrar datos", "Responder a acciones del usuario", "Crear funciones", "Definir variables"], answer: "Responder a acciones del usuario" },
            { question: "¿Se pueden quitar escuchadores de eventos?", options: ["Sí", "No", "Solo algunos", "Solo en objetos"], answer: "Sí" },
            { question: "¿Qué método quita escuchadores?", options: ["removeEventListener", "deleteEventListener", "offEvent", "stopEvent"], answer: "removeEventListener" }
        ]
    },
    { // Nivel 9 - Proyecto Final: Código completo
        title: "Proyecto Final: Página Web Completa",
        lesson: [
            {
                title: "Código Completo del Proyecto Final",
                content: `
                    <p>Aquí tienes el código completo de una página web interactiva que combina HTML, CSS y JavaScript:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Mi Proyecto Web&lt;/title&gt;
    &lt;style&gt;
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .contenedor {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .tarea {
            display: flex;
            align-items: center;
            margin: 10px 0;
            padding: 10px;
            background: #f9f9f9;
            border-radius: 4px;
        }
        .completada {
            text-decoration: line-through;
            opacity: 0.6;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        button:hover {
            background: #0056b3;
        }
        input[type="text"] {
            flex: 1;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="contenedor"&gt;
        &lt;h1&gt;Lista de Tareas Interactiva&lt;/h1&gt;
        &lt;div id="nueva-tarea"&gt;
            &lt;input type="text" id="input-tarea" placeholder="Nueva tarea..."&gt;
            &lt;button onclick="agregarTarea()"&gt;Agregar&lt;/button&gt;
        &lt;/div&gt;
        &lt;ul id="lista-tareas"&gt;&lt;/ul&gt;
    &lt;/div&gt;

    &lt;script&gt;
        let tareas = [];

        function agregarTarea() {
            const input = document.getElementById('input-tarea');
            const texto = input.value.trim();
            if (texto) {
                tareas.push({ texto: texto, completada: false });
                input.value = '';
                mostrarTareas();
            }
        }

        function toggleTarea(index) {
            tareas[index].completada = !tareas[index].completada;
            mostrarTareas();
        }

        function eliminarTarea(index) {
            tareas.splice(index, 1);
            mostrarTareas();
        }

        function mostrarTareas() {
            const lista = document.getElementById('lista-tareas');
            lista.innerHTML = '';
            tareas.forEach((tarea, index) => {
                const li = document.createElement('li');
                li.className = 'tarea';
                li.innerHTML = \`
                    &lt;span class="\${tarea.completada ? 'completada' : ''}" onclick="toggleTarea(\${index})">\${tarea.texto}&lt;/span&gt;
                    &lt;button onclick="eliminarTarea(\${index})"&gt;Eliminar&lt;/button&gt;
                \`;
                lista.appendChild(li);
            });
        }

        // Permitir agregar con Enter
        document.getElementById('input-tarea').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                agregarTarea();
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Esta es una aplicación completa de lista de tareas que demuestra todos los conceptos aprendidos: HTML para estructura, CSS para estilos y JavaScript para interactividad.</p>
                `
            },
            {
                title: "Implementación del Proyecto",
                content: `
                    <p>Ahora que tienes el código completo del proyecto final, es momento de implementarlo. Crea un nuevo archivo HTML, copia el código proporcionado y ábrelo en tu navegador para ver la aplicación en funcionamiento.</p>
                    <p>Experimenta modificando los estilos, añadiendo más tareas o cambiando la funcionalidad para personalizar la aplicación según tus necesidades.</p>
                `
            }
        ],
        quiz: [
            { question: "¿Qué combina el proyecto final?", options: ["Solo HTML", "HTML y CSS", "HTML, CSS y JS", "Solo JavaScript"], answer: "HTML, CSS y JS" },
            { question: "¿Qué estructura la aplicación?", options: ["HTML", "CSS", "JavaScript", "Todas"], answer: "HTML" },
            { question: "¿Qué da estilo visual?", options: ["HTML", "CSS", "JavaScript", "Ninguna"], answer: "CSS" },
            { question: "¿Qué añade interactividad?", options: ["HTML", "CSS", "JavaScript", "Ninguna"], answer: "JavaScript" },
            { question: "¿Qué método modifica el DOM?", options: ["innerHTML", "textContent", "Ambos", "Ninguno"], answer: "Ambos" },
            { question: "¿Qué evento permite agregar con Enter?", options: ["click", "keypress", "keydown", "keyup"], answer: "keypress" },
            { question: "¿Qué estructura almacena las tareas?", options: ["Variable", "Array", "Objeto", "String"], answer: "Array" },
            { question: "¿Qué propiedad marca tareas completadas?", options: ["done", "completed", "finished", "checked"], answer: "completada" },
            { question: "¿Qué método añade elementos al DOM?", options: ["appendChild", "addElement", "insertElement", "createElement"], answer: "appendChild" },
            { question: "¿Qué hace toggle en el código?", options: ["Cambia estado", "Elimina tarea", "Agrega tarea", "Muestra lista"], answer: "Cambia estado" }
        ]
    },
    { // Nivel 10 - Repaso General
        title: "Repaso Final",
        lesson: [
            {
                title: "HTML: Estructura",
                content: `
                    <p>HTML crea la estructura con etiquetas como &lt;h1&gt;, &lt;p&gt;, &lt;div&gt;, etc.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Título&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Contenido&lt;/h1&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                `
            },
            {
                title: "CSS: Estilos",
                content: `
                    <p>CSS da estilo con selectores y propiedades.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">body {
    font-family: Arial;
    background: #f0f0f0;
}</code></pre>
                    </div>
                `
            },
            {
                title: "JavaScript: Interactividad",
                content: `
                    <p>JavaScript añade lógica y responde a eventos.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">function cambiarColor() {
    document.body.style.background = 'blue';
}</code></pre>
                    </div>
                `
            },
            {
                title: "Aplicación Práctica",
                content: "<p>¡Has dominado los fundamentos del desarrollo web! En los próximos niveles aplicarás estos conocimientos en proyectos más avanzados. ¡Sigue practicando!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué lenguaje estructura el contenido?", options: ["CSS", "JavaScript", "HTML", "SQL"], answer: "HTML" },
            { question: "¿Qué lenguaje da estilos?", options: ["HTML", "JavaScript", "CSS", "PHP"], answer: "CSS" },
            { question: "¿Qué lenguaje añade interactividad?", options: ["HTML", "CSS", "JavaScript", "XML"], answer: "JavaScript" },
            { question: "¿Qué etiqueta define el tipo de documento?", options: ["<html>", "<head>", "<!DOCTYPE html>", "<body>"], answer: "<!DOCTYPE html>" },
            { question: "¿Qué propiedad CSS cambia colores?", options: ["font-size", "color", "margin", "padding"], answer: "color" },
            { question: "¿Qué método JS selecciona elementos?", options: ["getElementById", "querySelector", "addEventListener", "innerHTML"], answer: "getElementById" },
            { question: "¿Qué evento responde a clics?", options: ["load", "change", "click", "submit"], answer: "click" },
            { question: "¿Qué selector CSS selecciona clases?", options: ["#", ".", "*", ":"], answer: "." },
            { question: "¿Qué palabra clave declara variables?", options: ["var", "let", "const", "Todas"], answer: "Todas" },
            { question: "¿Qué hace el DOM?", options: ["Conecta lenguajes", "Representa HTML en JS", "Ejecuta código", "Almacena datos"], answer: "Representa HTML en JS" }
        ]
    },
    { // Nivel 11 - Formularios HTML
        title: "Formularios en HTML",
        lesson: [
            {
                title: "Código Completo: Formulario de Contacto",
                content: `
                    <p>Aquí tienes el código completo de un formulario de contacto funcional:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html lang="es"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;title&gt;Formulario de Contacto&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Contáctanos&lt;/h1&gt;
    &lt;form action="/enviar" method="post"&gt;
        &lt;label for="nombre"&gt;Nombre:&lt;/label&gt;
        &lt;input type="text" id="nombre" name="nombre" required&gt;&lt;br&gt;&lt;br&gt;

        &lt;label for="email"&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" name="email" required&gt;&lt;br&gt;&lt;br&gt;

        &lt;label for="mensaje"&gt;Mensaje:&lt;/label&gt;&lt;br&gt;
        &lt;textarea id="mensaje" name="mensaje" rows="4" cols="50"&gt;&lt;/textarea&gt;&lt;br&gt;&lt;br&gt;

        &lt;input type="submit" value="Enviar"&gt;
    &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Este formulario permite a los usuarios enviar información de contacto al servidor.</p>
                `
            },
            {
                title: "Explicación del Código: Etiqueta Form",
                content: `
                    <p>La etiqueta <form> define un formulario. Los atributos action y method especifican dónde y cómo enviar los datos.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;form action="/enviar" method="post"&gt;
    &lt;!-- Contenido del formulario --&gt;
&lt;/form&gt;</code></pre>
                    </div>
                    <p>action especifica la URL donde enviar los datos, method puede ser "get" o "post".</p>
                `
            },
            {
                title: "Explicación del Código: Inputs de Texto",
                content: `
                    <p><input> crea campos de entrada. type="text" para texto normal, type="email" para emails.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;label for="nombre"&gt;Nombre:&lt;/label&gt;
&lt;input type="text" id="nombre" name="nombre" required&gt;</code></pre>
                    </div>
                    <p>El atributo required hace el campo obligatorio. name identifica el campo en el envío.</p>
                `
            },
            {
                title: "Explicación del Código: Textarea",
                content: `
                    <p><textarea> crea un área de texto multilínea para mensajes largos.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;textarea id="mensaje" name="mensaje" rows="4" cols="50"&gt;&lt;/textarea&gt;</code></pre>
                    </div>
                    <p>rows y cols controlan el tamaño inicial del área de texto.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido a crear formularios HTML para recopilar datos de usuarios. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué etiqueta define un formulario?", options: ["<input>", "<form>", "<textarea>", "<label>"], answer: "<form>" },
            { question: "¿Qué atributo hace un campo obligatorio?", options: ["required", "mandatory", "needed", "essential"], answer: "required" },
            { question: "¿Qué type es para emails?", options: ["text", "email", "mail", "address"], answer: "email" },
            { question: "¿Qué etiqueta crea áreas de texto multilínea?", options: ["<input>", "<textarea>", "<text>", "<multiline>"], answer: "<textarea>" },
            { question: "¿Qué atributo especifica dónde enviar los datos?", options: ["action", "method", "target", "url"], answer: "action" },
            { question: "¿Qué method envía datos de forma visible?", options: ["post", "get", "send", "submit"], answer: "get" },
            { question: "¿Qué etiqueta asocia texto con un input?", options: ["<label>", "<text>", "<associate>", "<link>"], answer: "<label>" },
            { question: "¿Qué atributo conecta label con input?", options: ["id", "name", "for", "connect"], answer: "for" },
            { question: "¿Qué type es para contraseñas?", options: ["text", "password", "secret", "hidden"], answer: "password" },
            { question: "¿Qué atributo especifica el nombre del campo?", options: ["id", "name", "field", "label"], answer: "name" }
        ]
    },
    { // Nivel 12 - CSS Grid
        title: "CSS Grid Layout",
        lesson: [
            {
                title: "Código Completo: Layout con Grid",
                content: `
                    <p>Aquí tienes el código completo de un layout usando CSS Grid:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;style&gt;
        .grid-container {
            display: grid;
            grid-template-columns: 1fr 2fr 1fr;
            grid-template-rows: 100px auto 100px;
            gap: 10px;
        }
        .header { grid-column: 1 / -1; background: lightblue; }
        .sidebar { background: lightgreen; }
        .main { background: lightyellow; }
        .footer { grid-column: 1 / -1; background: lightgray; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="grid-container"&gt;
        &lt;div class="header"&gt;Header&lt;/div&gt;
        &lt;div class="sidebar"&gt;Sidebar&lt;/div&gt;
        &lt;div class="main"&gt;Main Content&lt;/div&gt;
        &lt;div class="footer"&gt;Footer&lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Este layout crea una estructura de página con header, sidebar, contenido principal y footer usando CSS Grid.</p>
                `
            },
            {
                title: "Explicación del Código: display: grid",
                content: `
                    <p>display: grid convierte un contenedor en un grid container.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">.grid-container {
    display: grid;
}</code></pre>
                    </div>
                    <p>Los elementos hijos directos se convierten automáticamente en grid items.</p>
                `
            },
            {
                title: "Explicación del Código: grid-template-columns",
                content: `
                    <p>Define el número y tamaño de las columnas del grid.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">grid-template-columns: 1fr 2fr 1fr;</code></pre>
                    </div>
                    <p>1fr 2fr 1fr crea 3 columnas: la del medio es el doble de ancha que las laterales.</p>
                `
            },
            {
                title: "Explicación del Código: grid-column",
                content: `
                    <p>Permite que un elemento ocupe múltiples columnas o filas.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">.header { grid-column: 1 / -1; }</code></pre>
                    </div>
                    <p>1 / -1 significa desde la primera línea hasta la última, ocupando todas las columnas.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido CSS Grid para crear layouts complejos. ¡Demuestra que sabes usarlo!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué propiedad activa CSS Grid?", options: ["display: flex", "display: grid", "display: block", "display: inline"], answer: "display: grid" },
            { question: "¿Qué define las columnas del grid?", options: ["grid-template-rows", "grid-template-columns", "grid-columns", "grid-template"], answer: "grid-template-columns" },
            { question: "¿Qué significa 1fr?", options: ["1 píxel", "1 fracción del espacio disponible", "1 fila", "1 columna"], answer: "1 fracción del espacio disponible" },
            { question: "¿Qué propiedad define el espacio entre celdas?", options: ["margin", "padding", "gap", "space"], answer: "gap" },
            { question: "¿Qué permite ocupar múltiples columnas?", options: ["grid-column", "grid-row", "grid-span", "grid-multi"], answer: "grid-column" },
            { question: "¿Qué significa grid-column: 1 / -1?", options: ["Ocupa primera columna", "Ocupa todas las columnas", "Ocupa última columna", "Ocupa ninguna columna"], answer: "Ocupa todas las columnas" },
            { question: "¿Qué define las filas del grid?", options: ["grid-template-rows", "grid-template-columns", "grid-rows", "grid-template"], answer: "grid-template-rows" },
            { question: "¿Qué propiedad alinea items en el eje cross?", options: ["justify-items", "align-items", "place-items", "center-items"], answer: "align-items" },
            { question: "¿Qué propiedad alinea items en el eje main?", options: ["justify-items", "align-items", "place-items", "center-items"], answer: "justify-items" },
            { question: "¿Qué es un grid item?", options: ["El contenedor grid", "Los elementos hijos directos", "Las líneas del grid", "Las áreas del grid"], answer: "Los elementos hijos directos" }
        ]
    },
    { // Nivel 13 - Arrays en JavaScript
        title: "Arrays en JavaScript",
        lesson: [
            {
                title: "Código Completo: Gestión de Lista de Tareas",
                content: `
                    <p>Aquí tienes el código completo de una aplicación simple de lista de tareas usando arrays:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">let tareas = ["Comprar leche", "Estudiar JS", "Hacer ejercicio"];

// Añadir tarea
tareas.push("Llamar a mamá");

// Mostrar tareas
console.log("Lista de tareas:");
tareas.forEach(function(tarea, index) {
    console.log(index + 1 + ". " + tarea);
});

// Marcar primera tarea como completada
tareas[0] = "✓ Comprar leche";

// Eliminar última tarea
tareas.pop();

console.log("Tareas restantes:", tareas.length);</code></pre>
                    </div>
                    <p>Este código demuestra operaciones básicas con arrays en JavaScript.</p>
                `
            },
            {
                title: "Explicación del Código: Creación de Arrays",
                content: `
                    <p>Los arrays almacenan colecciones de datos.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">let tareas = ["Comprar leche", "Estudiar JS", "Hacer ejercicio"];</code></pre>
                    </div>
                    <p>Los arrays se crean con corchetes y pueden contener cualquier tipo de datos.</p>
                `
            },
            {
                title: "Explicación del Código: Métodos de Arrays",
                content: `
                    <p>JavaScript proporciona métodos útiles para trabajar con arrays.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">// Añadir elemento al final
tareas.push("Nueva tarea");

// Eliminar último elemento
tareas.pop();

// Recorrer array
tareas.forEach(function(tarea) {
    console.log(tarea);
});</code></pre>
                    </div>
                `
            },
            {
                title: "Métodos Comunes de Arrays",
                content: `
                    <p>Algunos métodos útiles para arrays:</p>
                    <ul>
                        <li><code>push()</code> - Añade elemento al final</li>
                        <li><code>pop()</code> - Elimina último elemento</li>
                        <li><code>shift()</code> - Elimina primer elemento</li>
                        <li><code>unshift()</code> - Añade elemento al inicio</li>
                        <li><code>forEach()</code> - Ejecuta función para cada elemento</li>
                        <li><code>map()</code> - Crea nuevo array transformando elementos</li>
                    </ul>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido a trabajar con arrays en JavaScript. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué es un array?", options: ["Colección de datos", "Tipo de variable", "Función", "Objeto"], answer: "Colección de datos" },
            { question: "¿Qué método añade elemento al final?", options: ["push()", "pop()", "add()", "append()"], answer: "push()" },
            { question: "¿Qué método elimina el último elemento?", options: ["push()", "pop()", "remove()", "delete()"], answer: "pop()" },
            { question: "¿Cómo acceder al primer elemento?", options: ["array[0]", "array[1]", "array.first", "array.start"], answer: "array[0]" },
            { question: "¿Qué hace forEach()?", options: ["Ejecuta función para cada elemento", "Filtra elementos", "Ordena elementos", "Elimina elementos"], answer: "Ejecuta función para cada elemento" },
            { question: "¿Qué método crea nuevo array transformado?", options: ["forEach()", "map()", "filter()", "reduce()"], answer: "map()" },
            { question: "¿Qué método filtra elementos?", options: ["forEach()", "map()", "filter()", "reduce()"], answer: "filter()" },
            { question: "¿Cómo saber longitud de array?", options: ["array.length", "array.size", "array.count", "array.items"], answer: "array.length" },
            { question: "¿Qué hace shift()?", options: ["Elimina primer elemento", "Elimina último elemento", "Añade al inicio", "Añade al final"], answer: "Elimina primer elemento" },
            { question: "¿Qué hace unshift()?", options: ["Elimina primer elemento", "Elimina último elemento", "Añade al inicio", "Añade al final"], answer: "Añade al inicio" }
        ]
    },
    { // Nivel 14 - CSS Flexbox
        title: "CSS Flexbox",
        lesson: [
            {
                title: "Código Completo: Layout con Flexbox",
                content: `
                    <p>Aquí tienes el código completo de un layout usando CSS Flexbox:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;style&gt;
        .flex-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 200px;
            background: lightgray;
        }
        .item {
            background: lightblue;
            padding: 20px;
            margin: 10px;
            flex: 1;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="flex-container"&gt;
        &lt;div class="item"&gt;Item 1&lt;/div&gt;
        &lt;div class="item"&gt;Item 2&lt;/div&gt;
        &lt;div class="item"&gt;Item 3&lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Este layout distribuye los elementos horizontalmente usando Flexbox.</p>
                `
            },
            {
                title: "Explicación del Código: display: flex",
                content: `
                    <p>display: flex convierte el contenedor en un flex container.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">.flex-container {
    display: flex;
}</code></pre>
                    </div>
                    <p>Los elementos hijos se convierten en flex items.</p>
                `
            },
            {
                title: "Explicación del Código: justify-content",
                content: `
                    <p>justify-content alinea los items a lo largo del eje principal (horizontal).</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">justify-content: space-between;</code></pre>
                    </div>
                    <p>space-between distribuye el espacio entre los items.</p>
                `
            },
            {
                title: "Explicación del Código: align-items",
                content: `
                    <p>align-items alinea los items a lo largo del eje cruzado (vertical).</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">align-items: center;</code></pre>
                    </div>
                    <p>center alinea los items al centro verticalmente.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido CSS Flexbox para layouts flexibles. ¡Demuestra que sabes usarlo!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué propiedad activa Flexbox?", options: ["display: flex", "display: grid", "display: block", "display: inline"], answer: "display: flex" },
            { question: "¿Qué alinea items horizontalmente?", options: ["align-items", "justify-content", "flex-direction", "align-content"], answer: "justify-content" },
            { question: "¿Qué alinea items verticalmente?", options: ["justify-items", "align-items", "place-items", "center-items"], answer: "align-items" },
            { question: "¿Qué valor distribuye espacio entre items?", options: ["space-around", "space-between", "space-evenly", "distribute"], answer: "space-between" },
            { question: "¿Qué propiedad cambia la dirección?", options: ["flex-direction", "direction", "flow", "axis"], answer: "flex-direction" },
            { question: "¿Qué hace flex: 1?", options: ["Hace el item flexible", "Establece ancho fijo", "Centra el item", "Oculta el item"], answer: "Hace el item flexible" },
            { question: "¿Qué es un flex item?", options: ["El contenedor flex", "Los elementos hijos directos", "Las líneas flex", "Las áreas flex"], answer: "Los elementos hijos directos" },
            { question: "¿Qué propiedad controla el orden?", options: ["order", "index", "position", "z-index"], answer: "order" },
            { question: "¿Qué hace flex-wrap?", options: ["Permite que los items se envuelvan", "Centra los items", "Estira los items", "Comprime los items"], answer: "Permite que los items se envuelvan" },
            { question: "¿Cuál es el eje principal por defecto?", options: ["Vertical", "Horizontal", "Diagonal", "Ninguno"], answer: "Horizontal" }
        ]
    },
    { // Nivel 15 - Media Queries
        title: "Media Queries y Diseño Responsivo",
        lesson: [
            {
                title: "Código Completo: Página Responsiva",
                content: `
                    <p>Aquí tienes el código completo de una página web responsiva:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;style&gt;
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
        }
        .card {
            background: lightblue;
            padding: 20px;
            text-align: center;
        }

        @media (max-width: 768px) {
            .grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            .grid {
                grid-template-columns: 1fr;
            }
            .container {
                padding: 10px;
            }
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;div class="grid"&gt;
            &lt;div class="card"&gt;Card 1&lt;/div&gt;
            &lt;div class="card"&gt;Card 2&lt;/div&gt;
            &lt;div class="card"&gt;Card 3&lt;/div&gt;
            &lt;div class="card"&gt;Card 4&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Esta página se adapta a diferentes tamaños de pantalla usando media queries.</p>
                `
            },
            {
                title: "Explicación del Código: Media Queries",
                content: `
                    <p>Las media queries aplican estilos basados en características del dispositivo.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">@media (max-width: 768px) {
    .grid {
        grid-template-columns: repeat(2, 1fr);
    }
}</code></pre>
                    </div>
                    <p>Esta media query cambia el grid a 2 columnas en pantallas menores a 768px.</p>
                `
            },
            {
                title: "Explicación del Código: Breakpoints",
                content: `
                    <p>Los breakpoints son puntos donde cambian los estilos para diferentes tamaños.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">@media (max-width: 480px) {
    .grid {
        grid-template-columns: 1fr;
    }
}</code></pre>
                    </div>
                    <p>En móviles pequeños, el grid se convierte en una sola columna.</p>
                `
            },
            {
                title: "Mobile First",
                content: `
                    <p>El enfoque "mobile first" significa diseñar primero para móviles y luego añadir estilos para pantallas más grandes.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">/* Estilos base para móviles */
.grid {
    grid-template-columns: 1fr;
}

/* Estilos para tablets */
@media (min-width: 768px) {
    .grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

/* Estilos para desktop */
@media (min-width: 1024px) {
    .grid {
        grid-template-columns: repeat(4, 1fr);
    }
}</code></pre>
                    </div>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido media queries para diseño responsivo. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué permiten las media queries?", options: ["Aplicar estilos condicionales", "Crear animaciones", "Cambiar colores", "Añadir fuentes"], answer: "Aplicar estilos condicionales" },
            { question: "¿Qué significa max-width: 768px?", options: ["Pantallas más anchas que 768px", "Pantallas más estrechas que 768px", "Pantallas exactamente de 768px", "Pantallas más altas que 768px"], answer: "Pantallas más estrechas que 768px" },
            { question: "¿Qué es un breakpoint?", options: ["Punto de ruptura del código", "Punto donde cambian los estilos", "Punto de carga de la página", "Punto de conexión con el servidor"], answer: "Punto donde cambian los estilos" },
            { question: "¿Qué media type es común?", options: ["screen", "print", "speech", "Todos"], answer: "Todos" },
            { question: "¿Qué propiedad es responsive por defecto?", options: ["width", "max-width", "min-width", "height"], answer: "max-width" },
            { question: "¿Qué significa min-width?", options: ["Mínimo ancho requerido", "Máximo ancho requerido", "Ancho exacto", "Ancho mínimo del elemento"], answer: "Mínimo ancho requerido" },
            { question: "¿Por qué es importante el diseño responsivo?", options: ["Mejor UX en móviles", "Más rápido", "Más barato", "Más colores"], answer: "Mejor UX en móviles" },
            { question: "¿Qué herramienta ayuda con responsive?", options: ["DevTools", "Consola", "Terminal", "Editor"], answer: "DevTools" },
            { question: "¿Qué unidad es relativa al viewport?", options: ["px", "em", "vw", "%"], answer: "vw" },
            { question: "¿Qué significa 100vw?", options: ["100% del ancho del viewport", "100% del alto del viewport", "100 píxeles", "100% del contenedor"], answer: "100% del ancho del viewport" }
        ]
    },
    { // Nivel 16 - APIs con Fetch
        title: "Introducción a APIs con Fetch",
        lesson: [
            {
                title: "Código Completo: Obtener Datos de una API",
                content: `
                    <p>Aquí tienes el código completo para obtener datos de una API usando fetch:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;div id="resultado"&gt;&lt;/div&gt;

    &lt;script&gt;
        fetch('https://jsonplaceholder.typicode.com/posts/1')
            .then(response => response.json())
            .then(data => {
                document.getElementById('resultado').innerHTML =
                    '&lt;h2&gt;' + data.title + '&lt;/h2&gt;&lt;p&gt;' + data.body + '&lt;/p&gt;';
            })
            .catch(error => {
                console.error('Error:', error);
                document.getElementById('resultado').innerHTML = 'Error al cargar datos';
            });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Este código obtiene datos de una API y los muestra en la página.</p>
                `
            },
            {
                title: "Explicación del Código: fetch()",
                content: `
                    <p>fetch() es una función moderna para hacer peticiones HTTP.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">fetch('https://jsonplaceholder.typicode.com/posts/1')</code></pre>
                    </div>
                    <p>fetch() devuelve una Promise que se resuelve con la respuesta.</p>
                `
            },
            {
                title: "Explicación del Código: .then()",
                content: `
                    <p>.then() maneja la respuesta exitosa de la petición.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">.then(response => response.json())</code></pre>
                    </div>
                    <p>response.json() convierte la respuesta a un objeto JavaScript.</p>
                `
            },
            {
                title: "Explicación del Código: .catch()",
                content: `
                    <p>.catch() maneja los errores que puedan ocurrir.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">.catch(error => {
    console.error('Error:', error);
})</code></pre>
                    </div>
                    <p>Es importante manejar errores para una buena experiencia de usuario.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido a consumir APIs con fetch. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué hace fetch()?", options: ["Hace peticiones HTTP", "Crea elementos HTML", "Cambia estilos", "Maneja eventos"], answer: "Hace peticiones HTTP" },
            { question: "¿Qué devuelve fetch()?", options: ["Datos directos", "Una Promise", "Un array", "Un objeto"], answer: "Una Promise" },
            { question: "¿Qué método convierte respuesta a JSON?", options: ["response.text()", "response.json()", "response.xml()", "response.data()"], answer: "response.json()" },
            { question: "¿Qué maneja .catch()?", options: ["Respuestas exitosas", "Errores", "Datos", "Eventos"], answer: "Errores" },
            { question: "¿Qué es una API?", options: ["Interfaz de Programación de Aplicaciones", "Aplicación de Programación Interactiva", "Archivo de Programación de Internet", "Acceso a Programación de Internet"], answer: "Interfaz de Programación de Aplicaciones" },
            { question: "¿Qué significa HTTP?", options: ["HyperText Transfer Protocol", "High-Tech Transfer Protocol", "HyperText Transport Protocol", "Home Transfer Protocol"], answer: "HyperText Transfer Protocol" },
            { question: "¿Qué es JSON?", options: ["JavaScript Object Notation", "JavaScript Online Network", "Java Simple Object Notation", "JavaScript Object Network"], answer: "JavaScript Object Notation" },
            { question: "¿Qué es asíncrono?", options: ["Se ejecuta inmediatamente", "No bloquea el código", "Es más rápido", "Es más lento"], answer: "No bloquea el código" },
            { question: "¿Qué es una Promise?", options: ["Un objeto que representa un valor futuro", "Un tipo de variable", "Una función", "Un array"], answer: "Un objeto que representa un valor futuro" },
            { question: "¿Por qué usar APIs?", options: ["Obtener datos externos", "Crear estilos", "Hacer animaciones", "Cambiar colores"], answer: "Obtener datos externos" }
        ]
    },
    { // Nivel 17 - Local Storage
        title: "Local Storage y Session Storage",
        lesson: [
            {
                title: "Código Completo: Guardar Datos Localmente",
                content: `
                    <p>Aquí tienes el código completo para usar Local Storage:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;body&gt;
    &lt;input type="text" id="input" placeholder="Escribe algo"&gt;
    &lt;button onclick="guardar()"&gt;Guardar&lt;/button&gt;
    &lt;button onclick="cargar()"&gt;Cargar&lt;/button&gt;
    &lt;div id="resultado"&gt;&lt;/div&gt;

    &lt;script&gt;
        function guardar() {
            const valor = document.getElementById('input').value;
            localStorage.setItem('miDato', valor);
            alert('Dato guardado');
        }

        function cargar() {
            const valor = localStorage.getItem('miDato');
            document.getElementById('resultado').innerHTML = valor || 'No hay datos';
        }

        // Cargar al iniciar
        window.onload = cargar;
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Esta aplicación guarda y carga datos usando Local Storage.</p>
                `
            },
            {
                title: "Explicación del Código: setItem()",
                content: `
                    <p>setItem() guarda un valor en el almacenamiento local.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">localStorage.setItem('miDato', valor);</code></pre>
                    </div>
                    <p>Los datos persisten incluso después de cerrar el navegador.</p>
                `
            },
            {
                title: "Explicación del Código: getItem()",
                content: `
                    <p>getItem() recupera un valor del almacenamiento local.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">const valor = localStorage.getItem('miDato');</code></pre>
                    </div>
                    <p>Si la clave no existe, devuelve null.</p>
                `
            },
            {
                title: "Diferencia con Session Storage",
                content: `
                    <p>Session Storage dura solo durante la sesión del navegador, Local Storage persiste.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">// Local Storage
localStorage.setItem('clave', 'valor');

// Session Storage
sessionStorage.setItem('clave', 'valor');</code></pre>
                    </div>
                    <p>Usa sessionStorage para datos temporales, localStorage para persistentes.</p>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido Local Storage para persistir datos. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué permite Local Storage?", options: ["Guardar datos en el navegador", "Enviar datos al servidor", "Crear cookies", "Almacenar en base de datos"], answer: "Guardar datos en el navegador" },
            { question: "¿Qué método guarda datos?", options: ["saveItem()", "setItem()", "storeItem()", "putItem()"], answer: "setItem()" },
            { question: "¿Qué método recupera datos?", options: ["getItem()", "retrieveItem()", "loadItem()", "fetchItem()"], answer: "getItem()" },
            { question: "¿Cuánto dura Local Storage?", options: ["Solo la sesión", "Hasta que se borre", "1 día", "1 semana"], answer: "Hasta que se borre" },
            { question: "¿Qué devuelve getItem() si no existe?", options: ["undefined", "null", "error", "empty"], answer: "null" },
            { question: "¿Qué borra todos los datos?", options: ["clear()", "removeAll()", "deleteAll()", "erase()"], answer: "clear()" },
            { question: "¿Qué borra un item específico?", options: ["removeItem()", "deleteItem()", "clearItem()", "eraseItem()"], answer: "removeItem()" },
            { question: "¿Cuál es el límite de Local Storage?", options: ["1KB", "5MB", "10MB", "Ilimitado"], answer: "5MB" },
            { question: "¿Qué tipo de datos se guarda?", options: ["Solo strings", "Cualquier tipo", "Solo números", "Solo objetos"], answer: "Solo strings" },
            { question: "¿Para qué usar JSON.stringify()?", options: ["Convertir a string", "Comprimir datos", "Encriptar datos", "Validar datos"], answer: "Convertir a string" }
        ]
    },
    { // Nivel 18 - Introducción a Bootstrap
        title: "Introducción a Bootstrap",
        lesson: [
            {
                title: "Código Completo: Página con Bootstrap",
                content: `
                    <p>Aquí tienes el código completo de una página usando Bootstrap:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="container"&gt;
        &lt;div class="row"&gt;
            &lt;div class="col-md-6"&gt;
                &lt;div class="card"&gt;
                    &lt;div class="card-body"&gt;
                        &lt;h5 class="card-title"&gt;Título de la Card&lt;/h5&gt;
                        &lt;p class="card-text"&gt;Contenido de la card.&lt;/p&gt;
                        &lt;a href="#" class="btn btn-primary"&gt;Botón&lt;/a&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="col-md-6"&gt;
                &lt;div class="alert alert-success" role="alert"&gt;
                    ¡Éxito! Operación completada.
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Esta página usa componentes de Bootstrap para un diseño rápido y responsivo.</p>
                `
            },
            {
                title: "Explicación del Código: Sistema de Grid",
                content: `
                    <p>Bootstrap usa un sistema de grid de 12 columnas para layouts.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;div class="container"&gt;
    &lt;div class="row"&gt;
        &lt;div class="col-md-6"&gt;Columna 1&lt;/div&gt;
        &lt;div class="col-md-6"&gt;Columna 2&lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                    </div>
                    <p>col-md-6 ocupa 6 de 12 columnas en pantallas medianas y superiores.</p>
                `
            },
            {
                title: "Explicación del Código: Componentes",
                content: `
                    <p>Bootstrap incluye componentes listos para usar como cards, botones, alerts.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;div class="card"&gt;
    &lt;div class="card-body"&gt;
        &lt;h5 class="card-title"&gt;Título&lt;/h5&gt;
        &lt;p class="card-text"&gt;Contenido&lt;/p&gt;
        &lt;a href="#" class="btn btn-primary"&gt;Botón&lt;/a&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                    </div>
                    <p>Las clases de Bootstrap aplican estilos automáticamente.</p>
                `
            },
            {
                title: "Responsive Design con Bootstrap",
                content: `
                    <p>Bootstrap es responsive por defecto. Usa clases como:</p>
                    <ul>
                        <li><code>col-sm-*</code> - Pantallas pequeñas (≥576px)</li>
                        <li><code>col-md-*</code> - Pantallas medianas (≥768px)</li>
                        <li><code>col-lg-*</code> - Pantallas grandes (≥992px)</li>
                        <li><code>col-xl-*</code> - Pantallas extra grandes (≥1200px)</li>
                    </ul>
                `
            },
            {
                title: "¡Listo para el Quiz!",
                content: "<p>Has aprendido Bootstrap para desarrollo rápido. ¡Demuestra tus conocimientos!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué es Bootstrap?", options: ["Framework CSS", "Lenguaje de programación", "Base de datos", "Servidor web"], answer: "Framework CSS" },
            { question: "¿Qué incluye Bootstrap?", options: ["Solo CSS", "CSS, JS y componentes", "Solo JavaScript", "Solo HTML"], answer: "CSS, JS y componentes" },
            { question: "¿Qué clase crea un contenedor?", options: [".container", ".wrapper", ".box", ".content"], answer: ".container" },
            { question: "¿Cuántas columnas tiene el grid?", options: ["6", "12", "16", "24"], answer: "12" },
            { question: "¿Qué significa col-md-6?", options: ["6 columnas en móviles", "6 columnas en medianas", "6 columnas siempre", "6 píxeles"], answer: "6 columnas en medianas" },
            { question: "¿Qué clase crea un botón?", options: [".button", ".btn", ".link", ".action"], answer: ".btn" },
            { question: "¿Qué es responsivo en Bootstrap?", options: ["El grid", "Los colores", "Las fuentes", "Los iconos"], answer: "El grid" },
            { question: "¿Cómo incluir Bootstrap?", options: ["Descargar archivos", "CDN", "Ambos", "Ninguno"], answer: "Ambos" },
            { question: "¿Qué hace .card?", options: ["Crea una tarjeta", "Centra contenido", "Cambia colores", "Añade bordes"], answer: "Crea una tarjeta" },
            { question: "¿Por qué usar Bootstrap?", options: ["Desarrollo rápido", "Más personalizado", "Mejor rendimiento", "Más ligero"], answer: "Desarrollo rápido" }
        ]
    },
    { // Nivel 19 - Proyecto Intermedio
        title: "Proyecto Intermedio: Galería de Imágenes",
        lesson: [
            {
                title: "Código Completo: Galería Interactiva",
                content: `
                    <p>Aquí tienes el código completo de una galería de imágenes interactiva:</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;style&gt;
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }
        .gallery img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .gallery img:hover {
            transform: scale(1.05);
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
        }
        .modal img {
            max-width: 90%;
            max-height: 90%;
        }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="gallery"&gt;
        &lt;img src="https://via.placeholder.com/300x200" alt="Imagen 1" onclick="openModal(this.src)"&gt;
        &lt;img src="https://via.placeholder.com/300x200" alt="Imagen 2" onclick="openModal(this.src)"&gt;
        &lt;img src="https://via.placeholder.com/300x200" alt="Imagen 3" onclick="openModal(this.src)"&gt;
    &lt;/div&gt;

    &lt;div class="modal" id="modal" onclick="closeModal()"&gt;
        &lt;img id="modal-img" src="" alt=""&gt;
    &lt;/div&gt;

    &lt;script&gt;
        function openModal(src) {
            document.getElementById('modal-img').src = src;
            document.getElementById('modal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('modal').style.display = 'none';
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
                    </div>
                    <p>Esta galería muestra imágenes en grid y permite verlas en modal al hacer clic.</p>
                `
            },
            {
                title: "Explicación del Código: Grid Responsivo",
                content: `
                    <p>El grid se adapta automáticamente al número de imágenes.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">.gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
    gap: 10px;
}</code></pre>
                    </div>
                    <p>auto-fill crea tantas columnas como quepan, cada una de al menos 200px.</p>
                `
            },
            {
                title: "Explicación del Código: Modal",
                content: `
                    <p>El modal muestra la imagen ampliada al hacer clic.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-javascript">function openModal(src) {
    document.getElementById('modal-img').src = src;
    document.getElementById('modal').style.display = 'flex';
}</code></pre>
                    </div>
                    <p>La función cambia la imagen del modal y lo muestra.</p>
                `
            },
            {
                title: "Transiciones y Efectos",
                content: `
                    <p>CSS permite añadir transiciones suaves para mejor experiencia de usuario.</p>
                    <div class="code-block rounded-lg overflow-hidden mt-4">
                      <div class="code-block-header px-4 py-2 flex items-center gap-2">
                        <span class="w-3 h-3 bg-red-500 rounded-full"></span><span class="w-3 h-3 bg-yellow-500 rounded-full"></span><span class="w-3 h-3 bg-green-500 rounded-full"></span>
                      </div>
                      <pre class="p-4"><code class="language-css">.gallery img {
    transition: transform 0.3s;
}

.gallery img:hover {
    transform: scale(1.05);
}</code></pre>
                    </div>
                    <p>Esto crea un efecto de zoom suave al pasar el mouse sobre las imágenes.</p>
                `
            },
            {
                title: "¡Proyecto Completado!",
                content: "<p>Has creado una galería interactiva combinando HTML, CSS y JavaScript. ¡Excelente trabajo!</p>"
            }
        ],
        quiz: [
            { question: "¿Qué usa la galería para el layout?", options: ["Flexbox", "Grid", "Float", "Position"], answer: "Grid" },
            { question: "¿Qué hace auto-fill?", options: ["Llena automáticamente", "Centra items", "Estira columnas", "Comprime filas"], answer: "Llena automáticamente" },
            { question: "¿Qué es un modal?", options: ["Ventana emergente", "Menú lateral", "Barra de navegación", "Pie de página"], answer: "Ventana emergente" },
            { question: "¿Qué propiedad hace responsivo el grid?", options: ["minmax()", "auto-fill", "Ambas", "Ninguna"], answer: "Ambas" },
            { question: "¿Qué evento abre el modal?", options: ["click", "hover", "load", "scroll"], answer: "click" },
            { question: "¿Qué hace object-fit: cover?", options: ["Cubre el contenedor", "Centra la imagen", "Recorta la imagen", "Estira la imagen"], answer: "Recorta la imagen" },
            { question: "¿Por qué usar modal?", options: ["Mejor UX", "Más rápido", "Menos código", "Más colores"], answer: "Mejor UX" },
            { question: "¿Qué oculta el modal?", options: ["display: none", "visibility: hidden", "opacity: 0", "Todas"], answer: "display: none" },
            { question: "¿Qué pasa al hacer clic fuera del modal?", options: ["Se cierra", "Se abre más", "Cambia imagen", "Nada"], answer: "Se cierra" },
            { question: "¿Qué combina este proyecto?", options: ["HTML, CSS, JS", "Solo HTML", "Solo CSS", "Solo JS"], answer: "HTML, CSS, JS" }
        ]
    },
    { // Nivel 20 - Repaso Avanzado
        title: "Repaso Avanzado y Próximos Pasos",
        lesson: [
            {
                title: "Resumen de Conceptos Avanzados",
                content: `
                    <p>Has aprendido técnicas avanzadas de desarrollo web. Aquí un resumen:</p>
                    <ul>
                        <li><strong>CSS Grid y Flexbox:</strong> Layouts modernos y flexibles</li>
                        <li><strong>Media Queries:</strong> Diseño responsivo para todos los dispositivos</li>
                        <li><strong>APIs con Fetch:</strong> Comunicación con servidores externos</li>
                        <li><strong>Local Storage:</strong> Persistencia de datos en el navegador</li>
                        <li><strong>Bootstrap:</strong> Framework para desarrollo rápido</li>
                        <li><strong>Proyectos Prácticos:</strong> Aplicación de conocimientos en proyectos reales</li>
                    </ul>
                `
            },
            {
                title: "Próximos Pasos en tu Aprendizaje",
                content: `
                    <p>Para continuar tu viaje en el desarrollo web, considera estos temas:</p>
                    <ul>
                        <li><strong>React/Vue/Angular:</strong> Frameworks de JavaScript para aplicaciones web</li>
                        <li><strong>Node.js:</strong> JavaScript en el servidor</li>
                        <li><strong>Bases de datos:</strong> Almacenamiento persistente (MongoDB, PostgreSQL)</li>
                        <li><strong>APIs RESTful:</strong> Diseño de APIs profesionales</li>
                        <li><strong>Git y GitHub:</strong> Control de versiones y colaboración</li>
                        <li><strong>Despliegue:</strong> Publicar tus aplicaciones (Vercel, Netlify, Heroku)</li>
                    </ul>
                `
            },
            {
                title: "Consejos para Mejorar",
                content: `
                    <p>Para ser un mejor desarrollador web:</p>
                    <ul>
                        <li>Practica diariamente creando proyectos personales</li>
                        <li>Lee documentación oficial y blogs técnicos</li>
                        <li>Contribuye a proyectos open source</li>
                        <li>Únete a comunidades de desarrolladores</li>
                        <li>Mantente actualizado con las últimas tecnologías</li>
                        <li>Aprende debugging y resolución de problemas</li>
                    </ul>
                `
            },
            {
                title: "¡Felicidades! Has Completado el Curso",
                content: `
                    <p>Has dominado los fundamentos del desarrollo web y explorado conceptos avanzados. Ahora tienes las habilidades para crear aplicaciones web interactivas y responsivas.</p>
                    <p>Recuerda: el aprendizaje continuo es clave en el desarrollo web. ¡Sigue explorando y creando!</p>
                `
            }
        ],
        quiz: [
            { question: "¿Qué permite CSS Grid?", options: ["Layouts complejos", "Solo filas", "Solo columnas", "Solo flexibilidad"], answer: "Layouts complejos" },
            { question: "¿Por qué usar media queries?", options: ["Diseño responsivo", "Mejor rendimiento", "Menos código", "Más colores"], answer: "Diseño responsivo" },
            { question: "¿Qué hace fetch()?", options: ["Peticiones HTTP", "Cambia DOM", "Guarda datos", "Crea elementos"], answer: "Peticiones HTTP" },
            { question: "¿Qué persiste más tiempo?", options: ["Session Storage", "Local Storage", "Variables JS", "Cookies"], answer: "Local Storage" },
            { question: "¿Qué acelera el desarrollo?", options: ["Bootstrap", "Escribir todo desde cero", "Solo CSS puro", "Solo JS puro"], answer: "Bootstrap" },
            { question: "¿Qué combina un proyecto full-stack?", options: ["Frontend + Backend", "Solo HTML", "Solo CSS", "Solo JS"], answer: "Frontend + Backend" },
            { question: "¿Qué es React?", options: ["Framework JS", "Lenguaje", "Base de datos", "Servidor"], answer: "Framework JS" },
            { question: "¿Para qué sirve Node.js?", options: ["JS en servidor", "JS en navegador", "JS en móvil", "JS en desktop"], answer: "JS en servidor" },
            { question: "¿Qué hace Git?", options: ["Control de versiones", "Desarrollo web", "Diseño UI", "Testing"], answer: "Control de versiones" },
            { question: "¿Dónde desplegar apps?", options: ["Vercel/Netlify", "Solo local", "Solo servidor propio", "Solo GitHub"], answer: "Vercel/Netlify" }
        ]
    }
];

// --- MAPEO DE DESAFÍOS (NIVELES ESPECÍFICOS) ---
// Key = Index del nivel (Nivel 1 = 0)
const challengeMap = {
    4: { // Nivel 5
        file: 'challenges/engine.html?id=level5',
        title: "Desafío: Modelo de Caja",
        requiredScore: 7
    },
    5: { // Nivel 6
        file: 'challenges/engine.html?id=level6',
        title: "Desafío: JS Interactivo",
        requiredScore: 7
    },
    9: { // Nivel 10
        file: 'challenges/engine.html?id=level10',
        title: "Desafío: Flexbox Avanzado",
        requiredScore: 7
    },
    10: { // Nivel 11
        file: 'challenges/engine.html?id=level11',
        title: "Desafío: Grid Básico",
        requiredScore: 7
    },
    14: { // Nivel 15
        file: 'challenges/engine.html?id=level15',
        title: "Desafío: Diseño Responsivo",
        requiredScore: 7
    },
    15: { // Nivel 16
        file: 'challenges/engine.html?id=level16',
        title: "Desafío: Fetch API",
        requiredScore: 7
    },
    18: { // Nivel 19
        file: 'challenges/engine.html?id=level19',
        title: "Desafío: Galería Interactiva",
        requiredScore: 7
    },
    19: { // Nivel 20
        file: 'challenges/engine.html?id=level20',
        title: "Examen Final: Landing Page",
        requiredScore: 7
    }
};

// --- LÓGICA DE LA APLICACIÓN ---
// (Misma lógica, adaptada para usar challengeMap)

const levelGrid = document.getElementById('level-grid');
const lessonPanel = document.getElementById('lesson-panel');
const levelSelectionPanel = document.getElementById('level-selection-panel');
const quizPanel = document.getElementById('quiz-panel');
const resultsPanel = document.getElementById('results-panel');
const lessonTitle = document.getElementById('lesson-title');
const lessonContent = document.getElementById('lesson-content');
const lessonStep = document.getElementById('lesson-step');
const lessonProgress = document.getElementById('lesson-progress');
const prevBtn = document.getElementById('prev-btn');
const nextBtn = document.getElementById('next-btn');
const closeLessonBtn = document.getElementById('close-lesson-btn');
const quizLevelTitle = document.getElementById('quiz-level-title');
const quizQuestion = document.getElementById('quiz-question');
const quizOptions = document.getElementById('quiz-options');
const quizProgress = document.getElementById('quiz-progress');
const resultsTitle = document.getElementById('results-title');
const resultsScore = document.getElementById('results-score');
const resultsMessage = document.getElementById('results-message');
const resultsIcon = document.getElementById('results-icon');
const retryLessonBtn = document.getElementById('retry-lesson-btn');
const nextLevelBtn = document.getElementById('next-level-btn');

let currentLevel = 0;
let currentStep = 0;
let currentQuizQuestion = 0;
let quizScore = 0;
let userProgress = { completedLevels: [] };
let codeEvaluations = [];

// Monaco Initialization Vars
let monacoRequireConfigured = false;
let monacoEditors = {};

function initializeCodeBlockMonaco() {
    // Configurar RequireJS una sola vez
    if (!monacoRequireConfigured) {
        if (window.require) {
            require.config({ paths: { 'vs': 'https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.36.1/min/vs' }});
            monacoRequireConfigured = true;
        } else {
            return; // Esperar a que cargue loader
        }
    }

    require(['vs/editor/editor.main'], function() {
        if (window.themeManager) window.themeManager.defineCustomThemes();

        document.querySelectorAll('.code-block').forEach((block) => {
            if (block.getAttribute('data-monaco-initialized') === 'true') return;
            
            const codeElement = block.querySelector('code');
            if (!codeElement) return;

            // Detect language
            let language = 'html'; // Default for web course
            const classStr = codeElement.className || '';
            if (classStr.includes('css')) language = 'css';
            else if (classStr.includes('javascript') || classStr.includes('js')) language = 'javascript';
            else if (classStr.includes('python')) language = 'python';

            const code = codeElement.textContent;
            let filename = 'example.' + (language === 'javascript' ? 'js' : language);

            block.innerHTML = '';
            block.style.height = 'auto';
            block.setAttribute('data-monaco-initialized', 'true');
            
            const editorContainer = document.createElement('div');
            editorContainer.style.width = '100%';
            const lineCount = code.split('\n').length;
            const height = Math.min(Math.max(lineCount * 21 + 20, 100), 500); 
            editorContainer.style.height = `${height}px`;
            editorContainer.className = 'monaco-static-block rounded-md overflow-hidden border border-gray-700 mt-4';
            
            const header = document.createElement('div');
            header.className = 'flex items-center justify-between px-4 py-2 bg-[#1a1b26] border-b border-gray-800';
            header.innerHTML = `
                <div class="flex gap-2">
                    <div class="w-3 h-3 rounded-full bg-[#ff5f56]"></div>
                    <div class="w-3 h-3 rounded-full bg-[#ffbd2e]"></div>
                    <div class="w-3 h-3 rounded-full bg-[#27c93f]"></div>
                </div>
                <div class="text-xs text-gray-400 font-mono">${filename}</div>
            `;
            
            block.appendChild(header);
            block.appendChild(editorContainer);

            monaco.editor.create(editorContainer, {
                value: code,
                language: language,
                theme: 'tokyo-night',
                readOnly: true,
                domReadOnly: true,
                minimap: { enabled: false },
                scrollBeyondLastLine: false,
                fontSize: 14,
                fontFamily: "'JetBrains Mono', monospace",
                lineNumbers: 'off',
                folding: false,
                renderLineHighlight: 'none',
                contextmenu: false,
                scrollbar: { vertical: 'hidden', horizontal: 'auto', useShadows: false },
                overviewRulerBorder: false,
                hideCursorInOverviewRuler: true,
                padding: { top: 10, bottom: 10 }
            });
        });
    });
}

function showPanel(panelId) {
    document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
    document.getElementById(panelId).classList.add('active');
}

function openLesson(level) {
    currentLevel = level;
    currentStep = 0;
    showLessonStep();
    showPanel('lesson-panel');
}

function showLessonStep() {
    const levelData = courseData[currentLevel];
    const lesson = levelData.lesson[currentStep];
    lessonTitle.textContent = `Nivel ${currentLevel + 1}: ${lesson.title}`;
    lessonContent.innerHTML = lesson.content;
    lessonStep.textContent = `${currentStep + 1} / ${levelData.lesson.length}`;
    lessonProgress.style.width = `${((currentStep + 1) / levelData.lesson.length) * 100}%`;
    prevBtn.disabled = currentStep === 0;
    nextBtn.textContent = currentStep === levelData.lesson.length - 1 ? 'Ir al Quiz' : 'Siguiente';
    
    nextBtn.textContent = currentStep === levelData.lesson.length - 1 ? 'Ir al Quiz' : 'Siguiente';
    
    // Iniciar Monaco en lugar de Prism para code-blocks
    setTimeout(initializeCodeBlockMonaco, 10);
    
    // Prism como fallback para inline codes <p><code>...</code></p>
    if (window.Prism) Prism.highlightAll();

    // Init Playgrounds
    const placeholders = lessonContent.querySelectorAll('.web-playground-placeholder');
    placeholders.forEach(ph => {
        const base64Code = ph.getAttribute('data-code-base64');
        const rawCode = ph.getAttribute('data-code');
        
        if (base64Code) {
            createWebPlayground(ph, base64Code, true);
        } else if (rawCode) {
            createWebPlayground(ph, rawCode, false);
        }
    });
}

function createWebPlayground(container, initialCodeOrBase64, isBase64 = false) {
    let initialCode = initialCodeOrBase64;
    if (isBase64) {
        try {
            initialCode = atob(initialCodeOrBase64);
        } catch (e) {
            console.error("Error decoding Base64 code:", e);
            initialCode = "<!-- Error cargando código base -->";
        }
    }

    // Clean indentation if raw string (not needed for Base64 usually, but good practice)
    if (!isBase64 && typeof initialCode === 'string') {
        initialCode = initialCode.replace(/^\n/, '').replace(/^\s{20}/gm, '');
    }

    container.innerHTML = `
        <div class="web-playground">
            <div class="playground-editor">
                <div class="playground-header">
                    <div class="playground-title">
                        <i data-lucide="code" class="w-4 h-4 text-blue-400"></i>
                        <span>HTML & CSS</span>
                    </div>
                </div>
                <!-- Spellcheck false is critical for code editors -->
                <textarea class="code-editor-area" spellcheck="false">${initialCode}</textarea>
            </div>
            <div class="playground-preview">
                <div class="playground-header">
                    <div class="playground-title">
                        <i data-lucide="eye" class="w-4 h-4 text-green-400"></i>
                        <span>VISTA PREVIA</span>
                    </div>
                    <button class="run-btn">
                        <i data-lucide="play" class="w-4 h-4"></i> EJECUTAR
                    </button>
                </div>
                <iframe class="preview-frame"></iframe>
            </div>
        </div>
    `;

    lucide.createIcons();

    const textarea = container.querySelector('textarea');
    const iframe = container.querySelector('iframe');
    const runBtn = container.querySelector('.run-btn');

    function updatePreview() {
        const code = textarea.value;
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        doc.open();
        doc.write(code);
        doc.close();
    }

    runBtn.addEventListener('click', () => {
        const icon = runBtn.querySelector('i');
        icon.setAttribute('data-lucide', 'loader');
        runBtn.classList.add('opacity-75');
        lucide.createIcons();
        
        updatePreview();
        
        // Mock loading effect
        setTimeout(() => {
            icon.setAttribute('data-lucide', 'play');
            runBtn.classList.remove('opacity-75');
            lucide.createIcons();
        }, 300);
    });

    // Auto-run initially
    updatePreview();

    // Shortcut Ctrl+Enter
    textarea.addEventListener('keydown', (e) => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
            e.preventDefault();
            runBtn.click();
        }
    });

    // Optional: Auto-run on type with debounce could be added here
}

function startQuiz() {
    currentQuizQuestion = 0;
    quizScore = 0;
    showQuizQuestion();
    showPanel('quiz-panel');
}

function showQuizQuestion() {
    const levelData = courseData[currentLevel];
    const question = levelData.quiz[currentQuizQuestion];
    quizLevelTitle.textContent = `Quiz - Nivel ${currentLevel + 1}`;
    quizQuestion.textContent = question.question;
    quizProgress.textContent = `${currentQuizQuestion + 1} / ${levelData.quiz.length}`;
    
    quizOptions.innerHTML = '';
    question.options.forEach((option, index) => {
        const optionElement = document.createElement('div');
        optionElement.className = 'quiz-option';
        optionElement.textContent = option;
        optionElement.addEventListener('click', () => selectOption(optionElement, option));
        quizOptions.appendChild(optionElement);
    });
}

function selectOption(optionElement, selectedOption) {
    document.querySelectorAll('.quiz-option').forEach(opt => opt.classList.remove('selected'));
    optionElement.classList.add('selected');
    setTimeout(() => { checkAnswer(selectedOption); }, 500);
}

function checkAnswer(selectedOption) {
    const levelData = courseData[currentLevel];
    const question = levelData.quiz[currentQuizQuestion];
    const isCorrect = selectedOption === question.answer;
    
    if (isCorrect) quizScore++;
    
    currentQuizQuestion++;
    if (currentQuizQuestion < levelData.quiz.length) {
        showQuizQuestion();
    } else {
        showResults();
    }
}

function showResults() {
    const levelData = courseData[currentLevel];
    const totalQuestions = levelData.quiz.length;
    const percentage = Math.round((quizScore / totalQuestions) * 100);

    // --- LOGIC FOR LEADERBOARD (XP) ---
    // Initialize quizScores map if not exists
    if (!userProgress.quizScores) userProgress.quizScores = {};

    // Only save score if it's the FIRST time passing or attempting this level's quiz
    // Actually, to prevent "retrying until 100%", we should record the First Attempt ever.
    // However, if they fail, they must retry to pass. 
    // The user requested: "deve ser el primer resultado". 
    // So we record the very first attempt score, even if failed? 
    // Ideally, we award XP based on the *passing* grade, but if they retried, we maybe cap it?
    // Let's implement: Record the score of the FIRST successful pass. Subsequent tries don't update it.
    // OR: Record the absolute first try. If they fail (score 2/10), they get 20 points recorded. 
    // They still need to retry to unlock next level, but the XP remains 20.
    // Let's go with: Record the score of the FIRST ATTEMPT that triggers "showResults".
    
    // Check if we already have a score for this level
    if (userProgress.quizScores[currentLevel] === undefined) {
        userProgress.quizScores[currentLevel] = quizScore;
        saveProgress();
    }
    // ----------------------------------

    if (percentage >= 70) {
        resultsTitle.textContent = '¡Felicidades!';
        resultsScore.textContent = `Puntuación: ${quizScore}/${totalQuestions} (${percentage}%)`;
        resultsMessage.textContent = 'Has aprobado el cuestionario.';
        resultsIcon.setAttribute('data-lucide', 'award');

        // VERIFICAR MAPEO DE DESAFÍO
        const challenge = challengeMap[currentLevel];

        if (challenge) {
            document.getElementById('code-challenge-btn').classList.remove('hidden');
            document.getElementById('code-challenge-btn').innerHTML = `<i data-lucide="code"></i> Ir al ${challenge.title}`;
            lucide.createIcons();

            nextLevelBtn.classList.add('hidden'); 
        } else {
            // Si NO hay desafío, completamos el nivel directamente
            markLevelCompleted(currentLevel);
            nextLevelBtn.classList.remove('hidden');
            document.getElementById('code-challenge-btn').classList.add('hidden');
        }
    } else {
        resultsTitle.textContent = '¡Inténtalo de nuevo!';
        resultsScore.textContent = `Puntuación: ${quizScore}/${totalQuestions} (${percentage}%)`;
        resultsMessage.textContent = 'Necesitas al menos 70% para aprobar.';
        resultsIcon.setAttribute('data-lucide', 'refresh-cw');
        nextLevelBtn.classList.add('hidden');
        document.getElementById('code-challenge-btn').classList.add('hidden');
    }

    lucide.createIcons();
    showPanel('results-panel');
}

function markLevelCompleted(levelIndex) {
    if (!userProgress.completedLevels.includes(levelIndex)) {
        userProgress.completedLevels.push(levelIndex);
        saveProgress();
        renderLevelGrid(); // Refrescar UI inmediatamente
        
        // Sync with global user object for Leaderboard
        updateGlobalUserProgress();
    }
}

function updateGlobalUserProgress() {
    // Update the 'currentUser' and 'allUsers' in localStorage so Leaderboard sees it
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (currentUser.id) {
        if (!currentUser.webProgress) currentUser.webProgress = { completedLevels: [], unlockedLevel: 1, quizScores: {} };
        currentUser.webProgress.completedLevels = userProgress.completedLevels;
        currentUser.webProgress.unlockedLevel = userProgress.completedLevels.length + 1; // Simplification
        currentUser.webProgress.quizScores = userProgress.quizScores;
        currentUser.webProgress.codeEvaluations = codeEvaluations; // Include evaluations
        
        localStorage.setItem('currentUser', JSON.stringify(currentUser));
        
        const allUsers = JSON.parse(localStorage.getItem('allUsers') || '[]');
        const idx = allUsers.findIndex(u => u.id === currentUser.id);
        if (idx !== -1) {
            allUsers[idx] = currentUser;
            localStorage.setItem('allUsers', JSON.stringify(allUsers));
        }
        
        // Sincronizar con Firebase en tiempo real
        if (window.updateCourseProgress) {
            updateCourseProgress(currentUser.id, 'webProgress', currentUser.webProgress)
                .catch(err => console.error('Error syncing web progress:', err));
        }
    }
}

function saveProgress() {
    localStorage.setItem('webCourseProgress', JSON.stringify(userProgress));
    updateGlobalUserProgress(); // Sync whenever we save local course progress
}

function loadProgress() {
    const savedProgress = localStorage.getItem('webCourseProgress');
    if (savedProgress) {
        userProgress = JSON.parse(savedProgress);
    }
    // Ensure quizScores object exists
    if (!userProgress.quizScores) userProgress.quizScores = {};
}

function saveEvaluations() {
    localStorage.setItem('codeEvaluations', JSON.stringify(codeEvaluations));
    updateGlobalUserProgress(); // Sync to Firestore
}

function loadEvaluations() {
    const savedEvaluations = localStorage.getItem('codeEvaluations');
    if (savedEvaluations) codeEvaluations = JSON.parse(savedEvaluations);
}

function renderLevelGrid() {
    levelGrid.innerHTML = '';
    courseData.forEach((level, index) => {
        const node = document.createElement('div');
        const isCompleted = userProgress.completedLevels.includes(index);
        const isUnlocked = index === 0 || (userProgress.unlockedLevel && index < userProgress.unlockedLevel) || userProgress.completedLevels.includes(index - 1);

        node.className = `level-node ${isCompleted ? 'completed' : isUnlocked ? 'unlocked' : 'locked'}`;
        node.innerHTML = `
            <div class="level-icon-wrapper">
                <i data-lucide="${isCompleted ? 'check' : 'code'}" class="w-8 h-8"></i>
            </div>
            <span class="level-number">Nivel ${index + 1}</span>
        `;

        if (isUnlocked) {
            node.addEventListener('click', () => openLesson(index));
        }

        levelGrid.appendChild(node);
    });
    lucide.createIcons();
}

function showCodeChallenge() {
    const challenge = challengeMap[currentLevel];
    if (challenge) {
        window.location.href = challenge.file;
    } else {
        console.error("No hay desafío configurado para este nivel.");
    }
}

function showCodeResults(score, feedback, code, levelIndex) {
    // Definimos nota mínima para pasar
    const MIN_SCORE = 7;
    const passed = score >= MIN_SCORE;
    
    document.getElementById('code-results-title').textContent = passed ? '¡Desafío Completado!' : 'Desafío No Completado';
    document.getElementById('code-results-score').textContent = `Nota: ${score}/10`;
    document.getElementById('code-results-feedback').innerHTML = feedback;

    const icon = document.getElementById('code-results-icon');
    if (passed) {
        icon.setAttribute('data-lucide', 'check-circle');
        icon.style.color = 'var(--green)';
        document.getElementById('next-level-after-challenge-btn').classList.remove('hidden');
        
        // Completar el nivel porque pasó el desafío
        markLevelCompleted(levelIndex);
    } else {
        icon.setAttribute('data-lucide', 'x-circle');
        icon.style.color = 'var(--red)';
        document.getElementById('next-level-after-challenge-btn').classList.add('hidden');
    }

    lucide.createIcons();
    showPanel('code-results-panel');
}

function nextLevelAfterChallenge() {
    if (currentLevel < courseData.length - 1) {
        openLesson(currentLevel + 1);
    } else {
        showPanel('level-selection-panel');
    }
}

function showRecords() {
    const recordsList = document.getElementById('records-list');
    recordsList.innerHTML = '';

    if (codeEvaluations.length === 0) {
        recordsList.innerHTML = '<p class="text-gray-400">No hay evaluaciones registradas aún.</p>';
    } else {
        codeEvaluations.forEach((eval) => {
            const recordDiv = document.createElement('div');
            recordDiv.className = 'bg-gray-800 p-4 rounded-lg border border-gray-700';
            recordDiv.innerHTML = `
                <div class="flex justify-between items-start mb-2">
                    <h3 class="font-bold text-lg text-blue-300">Nivel ${eval.level}</h3>
                    <span class="text-xs text-gray-500">${new Date(eval.date).toLocaleDateString()}</span>
                </div>
                <p class="font-semibold ${eval.score >= 7 ? 'text-green-400' : 'text-red-400'}">Nota: ${eval.score}/10</p>
                <details class="mt-2 text-sm">
                    <summary class="cursor-pointer text-blue-400 hover:underline">Ver Feedback</summary>
                    <div class="mt-2 text-gray-300 bg-gray-900 p-2 rounded">${eval.feedback}</div>
                </details>
            `;
            recordsList.appendChild(recordDiv);
        });
    }

    showPanel('records-panel');
}

// Inicialización
async function init() {
    // Sincronizar estado inicial desde Firebase si es posible
    const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
    if (currentUser.id && window.getUserFromFirestore) {
        try {
            console.log("Cargando progreso desde Firestore...");
            const freshUser = await window.getUserFromFirestore(currentUser.id);
            if (freshUser) {
                // Actualizar currentUser global
                localStorage.setItem('currentUser', JSON.stringify(freshUser));
                
                // Actualizar progreso específico del curso si existe
                if (freshUser.webProgress) {
                    localStorage.setItem('webCourseProgress', JSON.stringify(freshUser.webProgress));
                    // Sync Evaluations from Firestore to Local
                    if (freshUser.webProgress.codeEvaluations) {
                        localStorage.setItem('codeEvaluations', JSON.stringify(freshUser.webProgress.codeEvaluations));
                    }
                    console.log("Progreso actualizado desde Firestore:", freshUser.webProgress);
                }
            }
        } catch (e) {
            console.error("Error cargando datos de Firestore:", e);
        }
    }

    loadProgress();
    loadEvaluations();

    // Procesar retorno desde un desafío (challengeX.html?completed=X)
    const urlParams = new URLSearchParams(window.location.search);
    const completedLevel = urlParams.get('completed'); 
    
    if (completedLevel) {
        const result = JSON.parse(localStorage.getItem('challengeResult'));
        // Verificamos que el resultado corresponda al nivel que intentamos completar
        if (result && result.level == completedLevel) {
            // El nivel en el resultado y urlParams es "humano" (1-based), pero nuestra lógica interna usa 0-based a veces.
            // Para simplificar, asumimos que result.level es el número de nivel (ej: 6).
            // Convertimos a índice para usar en funciones internas si es necesario.
            const levelIndex = parseInt(completedLevel) - 1;
            
            processChallengeResult(result, levelIndex);
            
            // Limpiar URL
            window.history.replaceState({}, document.title, window.location.pathname);
        }
    }

    renderLevelGrid();
}

function processChallengeResult(result, levelIndex) {
    const analysis = result.analysis;
    let score = 0;
    // Extraer número de nota del JSON o del texto si el JSON falló
    // Pero idealmente result.analysis ya es un texto o JSON. El challenge guarda {level, code, analysis, date}
    
    // En challenge2.html, analysis = result.feedback
    // Y result.feedback viene del JSON de Gemini: { score: X, isPass: bool, feedback: "..." }
    // Espera... challenge2.html guarda TODO el feedback string en 'analysis'. 
    // PERO NO guarda el score numérico explícitamente en el primer nivel del objeto 'challengeResult'.
    // Debemos extraer el score de 'analysis' si es texto, o modificar challenge2 para que guarde score.
    
    // Mejor estrategia: Intentar extraer nota del texto si no viene explícita.
    // O mejor aún: EN CHALLENGE HTML debemos guardar el score también.
    
    // Por ahora, asumimos que pasaste si llegaste aquí con ?completed=X, porque challenge2.html solo redirige si isPass es true.
    // Aun así, tratemos de parsear un número.
    const scoreMatch = analysis.match(/score["']?:\s*(\d+)/) || analysis.match(/nota[:\s]*(\d+)/i);
    if (scoreMatch) score = parseInt(scoreMatch[1]);
    else score = 7; // Fallback si pasó

    const evaluation = {
        level: result.level,
        score: score,
        feedback: analysis,
        code: result.code,
        date: result.date
    };
    
    codeEvaluations.push(evaluation);
    saveEvaluations();
    
    // Mostrar pantalla de resultados
    showCodeResults(score, analysis, result.code, levelIndex);
}

prevBtn.addEventListener('click', () => {
    if (currentStep > 0) {
        currentStep--;
        showLessonStep();
    }
});

nextBtn.addEventListener('click', () => {
    const levelData = courseData[currentLevel];
    if (currentStep < levelData.lesson.length - 1) {
        currentStep++;
        showLessonStep();
    } else {
        startQuiz();
    }
});

closeLessonBtn.addEventListener('click', () => showPanel('level-selection-panel'));
retryLessonBtn.addEventListener('click', () => openLesson(currentLevel));

nextLevelBtn.addEventListener('click', () => {
    if (currentLevel < courseData.length - 1) {
        openLesson(currentLevel + 1);
    } else {
        showPanel('level-selection-panel');
    }
});

document.getElementById('code-challenge-btn').addEventListener('click', showCodeChallenge);
document.getElementById('next-level-after-challenge-btn').addEventListener('click', nextLevelAfterChallenge);
document.getElementById('retry-challenge-btn').addEventListener('click', showCodeChallenge);

document.getElementById('view-records-btn').addEventListener('click', showRecords);
document.getElementById('close-records-btn').addEventListener('click', () => showPanel('level-selection-panel'));
document.getElementById('close-challenge-btn').addEventListener('click', () => showPanel('level-selection-panel'));

// Theme toggle
const themeToggle = document.getElementById('theme-toggle');
const themeIcon = document.getElementById('theme-icon');
const htmlEl = document.documentElement;

themeToggle.addEventListener('click', () => {
    htmlEl.classList.toggle('dark');
    const isDark = htmlEl.classList.contains('dark');
    themeIcon.setAttribute('data-lucide', isDark ? 'moon' : 'sun');
    lucide.createIcons();
});

// Iniciar aplicación
init();

    </script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-markup.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-css.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
</body>
</html>